2025-02-15T15:33:22.514+03:00  INFO 11252 --- [main] c.e.c.UserControllerSecurityTest         : Starting UserControllerSecurityTest using Java 21.0.5 with PID 11252 (started by oleg2 in C:\Users\oleg2\IdeaProjects\security)
2025-02-15T15:33:22.516+03:00  INFO 11252 --- [main] c.e.c.UserControllerSecurityTest         : No active profile set, falling back to 1 default profile: "default"
2025-02-15T15:33:23.099+03:00  INFO 11252 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-15T15:33:23.140+03:00  INFO 11252 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 35 ms. Found 1 JPA repository interface.
2025-02-15T15:33:23.582+03:00  INFO 11252 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-15T15:33:23.643+03:00  INFO 11252 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-02-15T15:33:23.677+03:00  INFO 11252 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-02-15T15:33:23.910+03:00  INFO 11252 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-15T15:33:23.938+03:00  INFO 11252 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-02-15T15:33:24.091+03:00  INFO 11252 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:companydb user=SA
2025-02-15T15:33:24.092+03:00  INFO 11252 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-02-15T15:33:24.769+03:00  INFO 11252 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-15T15:33:24.811+03:00  INFO 11252 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T15:33:25.198+03:00  WARN 11252 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-02-15T15:33:25.476+03:00  INFO 11252 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@73072745, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bdbfbc6, org.springframework.security.web.context.SecurityContextHolderFilter@6484364f, org.springframework.security.web.header.HeaderWriterFilter@434a72f2, org.springframework.web.filter.CorsFilter@79735611, org.springframework.security.web.authentication.logout.LogoutFilter@30b29f55, com.example.config.security.LoggingFilter@75566f4, com.example.config.security.JwtAuthenticationFilter@7668f8fd, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@29f114e0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6c569caf, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@758ac46, org.springframework.security.web.session.SessionManagementFilter@4411a0fe, org.springframework.security.web.access.ExceptionTranslationFilter@36a8ebca, org.springframework.security.web.access.intercept.AuthorizationFilter@8961e55]
2025-02-15T15:33:25.687+03:00  INFO 11252 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:companydb'
2025-02-15T15:33:25.766+03:00  INFO 11252 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-02-15T15:33:25.766+03:00  INFO 11252 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-02-15T15:33:25.767+03:00  INFO 11252 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-02-15T15:33:25.788+03:00  INFO 11252 --- [main] c.e.c.UserControllerSecurityTest         : Started UserControllerSecurityTest in 3.539 seconds (process running for 4.493)
2025-02-15T15:33:26.218+03:00 DEBUG 11252 --- [main] o.s.security.web.FilterChainProxy        : Securing GET /user/profile
2025-02-15T15:33:26.222+03:00  INFO 11252 --- [main] c.example.config.security.LoggingFilter  : Method - GET
2025-02-15T15:33:26.222+03:00  INFO 11252 --- [main] c.example.config.security.LoggingFilter  : URL - http://localhost/user/profile
2025-02-15T15:33:26.223+03:00 DEBUG 11252 --- [main] o.s.security.web.FilterChainProxy        : Secured GET /user/profile
2025-02-15T15:33:26.236+03:00 DEBUG 11252 --- [main] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.getProfile(); target is of class [com.example.controller.UserController]
2025-02-15T15:33:26.257+03:00 DEBUG 11252 --- [main] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.getProfile(); target is of class [com.example.controller.UserController]
2025-02-15T15:33:26.269+03:00  INFO 11252 --- [main] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T15:33:26.292+03:00  INFO 11252 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T15:33:26.293+03:00  INFO 11252 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-02-15T15:33:26.294+03:00  INFO 11252 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-02-15T15:33:37.168+03:00  INFO 1968 --- [main] c.e.c.UserControllerSecurityTest         : Starting UserControllerSecurityTest using Java 21.0.5 with PID 1968 (started by oleg2 in C:\Users\oleg2\IdeaProjects\security)
2025-02-15T15:33:37.169+03:00  INFO 1968 --- [main] c.e.c.UserControllerSecurityTest         : No active profile set, falling back to 1 default profile: "default"
2025-02-15T15:33:37.701+03:00  INFO 1968 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-15T15:33:37.748+03:00  INFO 1968 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 35 ms. Found 1 JPA repository interface.
2025-02-15T15:33:38.157+03:00  INFO 1968 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-15T15:33:38.214+03:00  INFO 1968 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-02-15T15:33:38.247+03:00  INFO 1968 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-02-15T15:33:38.480+03:00  INFO 1968 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-15T15:33:38.508+03:00  INFO 1968 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-02-15T15:33:38.666+03:00  INFO 1968 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:companydb user=SA
2025-02-15T15:33:38.667+03:00  INFO 1968 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-02-15T15:33:39.356+03:00  INFO 1968 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-15T15:33:39.398+03:00  INFO 1968 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T15:33:39.788+03:00  WARN 1968 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-02-15T15:33:40.057+03:00  INFO 1968 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@30cb489a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@401d83ce, org.springframework.security.web.context.SecurityContextHolderFilter@4dc5b887, org.springframework.security.web.header.HeaderWriterFilter@5776a9f8, org.springframework.web.filter.CorsFilter@3b7b099b, org.springframework.security.web.authentication.logout.LogoutFilter@67eabe02, com.example.config.security.LoggingFilter@79454d8e, com.example.config.security.JwtAuthenticationFilter@3777fc44, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7552f05b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@524418a2, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5abc488d, org.springframework.security.web.session.SessionManagementFilter@3b39bee2, org.springframework.security.web.access.ExceptionTranslationFilter@28b16193, org.springframework.security.web.access.intercept.AuthorizationFilter@2a7b4bb6]
2025-02-15T15:33:40.268+03:00  INFO 1968 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:companydb'
2025-02-15T15:33:40.328+03:00  INFO 1968 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-02-15T15:33:40.328+03:00  INFO 1968 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-02-15T15:33:40.329+03:00  INFO 1968 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-02-15T15:33:40.350+03:00  INFO 1968 --- [main] c.e.c.UserControllerSecurityTest         : Started UserControllerSecurityTest in 3.432 seconds (process running for 4.247)
2025-02-15T15:33:40.771+03:00 DEBUG 1968 --- [main] o.s.security.web.FilterChainProxy        : Securing GET /user/profile
2025-02-15T15:33:40.775+03:00  INFO 1968 --- [main] c.example.config.security.LoggingFilter  : Method - GET
2025-02-15T15:33:40.775+03:00  INFO 1968 --- [main] c.example.config.security.LoggingFilter  : URL - http://localhost/user/profile
2025-02-15T15:33:40.776+03:00 DEBUG 1968 --- [main] o.s.security.web.FilterChainProxy        : Secured GET /user/profile
2025-02-15T15:33:40.789+03:00 DEBUG 1968 --- [main] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.getProfile(); target is of class [com.example.controller.UserController]
2025-02-15T15:33:40.811+03:00 DEBUG 1968 --- [main] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.getProfile(); target is of class [com.example.controller.UserController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@5fdebe73 and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('USER')]
2025-02-15T15:33:40.813+03:00 DEBUG 1968 --- [main] o.s.s.w.access.AccessDeniedHandlerImpl   : Responding with 403 status code
2025-02-15T15:33:40.813+03:00  INFO 1968 --- [main] c.example.config.security.LoggingFilter  : Response status - 403
2025-02-15T15:33:40.842+03:00  INFO 1968 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T15:33:40.843+03:00  INFO 1968 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-02-15T15:33:40.845+03:00  INFO 1968 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-02-15T15:34:00.834+03:00  INFO 4992 --- [main] c.e.c.UserControllerSecurityTest         : Starting UserControllerSecurityTest using Java 21.0.5 with PID 4992 (started by oleg2 in C:\Users\oleg2\IdeaProjects\security)
2025-02-15T15:34:00.835+03:00  INFO 4992 --- [main] c.e.c.UserControllerSecurityTest         : No active profile set, falling back to 1 default profile: "default"
2025-02-15T15:34:01.368+03:00  INFO 4992 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-15T15:34:01.409+03:00  INFO 4992 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 35 ms. Found 1 JPA repository interface.
2025-02-15T15:34:01.828+03:00  INFO 4992 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-15T15:34:01.880+03:00  INFO 4992 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-02-15T15:34:01.913+03:00  INFO 4992 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-02-15T15:34:02.147+03:00  INFO 4992 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-15T15:34:02.172+03:00  INFO 4992 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-02-15T15:34:02.325+03:00  INFO 4992 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:companydb user=SA
2025-02-15T15:34:02.326+03:00  INFO 4992 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-02-15T15:34:03.007+03:00  INFO 4992 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-15T15:34:03.050+03:00  INFO 4992 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T15:34:03.422+03:00  WARN 4992 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-02-15T15:34:03.696+03:00  INFO 4992 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5466a819, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@30cb489a, org.springframework.security.web.context.SecurityContextHolderFilter@6889e714, org.springframework.security.web.header.HeaderWriterFilter@78e34499, org.springframework.web.filter.CorsFilter@401d83ce, org.springframework.security.web.authentication.logout.LogoutFilter@8961e55, com.example.config.security.LoggingFilter@3777fc44, com.example.config.security.JwtAuthenticationFilter@7eb94590, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3b7dd173, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7552f05b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3b7b099b, org.springframework.security.web.session.SessionManagementFilter@22f0e329, org.springframework.security.web.access.ExceptionTranslationFilter@5eadc347, org.springframework.security.web.access.intercept.AuthorizationFilter@6250d33c]
2025-02-15T15:34:03.902+03:00  INFO 4992 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:companydb'
2025-02-15T15:34:03.974+03:00  INFO 4992 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-02-15T15:34:03.974+03:00  INFO 4992 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-02-15T15:34:03.975+03:00  INFO 4992 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-02-15T15:34:03.999+03:00  INFO 4992 --- [main] c.e.c.UserControllerSecurityTest         : Started UserControllerSecurityTest in 3.413 seconds (process running for 4.231)
2025-02-15T15:34:04.410+03:00 DEBUG 4992 --- [main] o.s.security.web.FilterChainProxy        : Securing GET /user/profile
2025-02-15T15:34:04.414+03:00  INFO 4992 --- [main] c.example.config.security.LoggingFilter  : Method - GET
2025-02-15T15:34:04.414+03:00  INFO 4992 --- [main] c.example.config.security.LoggingFilter  : URL - http://localhost/user/profile
2025-02-15T15:34:04.416+03:00 DEBUG 4992 --- [main] o.s.security.web.FilterChainProxy        : Secured GET /user/profile
2025-02-15T15:34:04.428+03:00 DEBUG 4992 --- [main] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.getProfile(); target is of class [com.example.controller.UserController]
2025-02-15T15:34:04.450+03:00 DEBUG 4992 --- [main] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.getProfile(); target is of class [com.example.controller.UserController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@5fdebe73 and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('USER')]
2025-02-15T15:34:04.452+03:00 DEBUG 4992 --- [main] o.s.s.w.access.AccessDeniedHandlerImpl   : Responding with 403 status code
2025-02-15T15:34:04.452+03:00  INFO 4992 --- [main] c.example.config.security.LoggingFilter  : Response status - 403
2025-02-15T15:34:04.475+03:00  INFO 4992 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T15:34:04.477+03:00  INFO 4992 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-02-15T15:34:04.478+03:00  INFO 4992 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-02-15T15:34:35.332+03:00  INFO 15644 --- [main] c.e.c.UserControllerSecurityTest         : Starting UserControllerSecurityTest using Java 21.0.5 with PID 15644 (started by oleg2 in C:\Users\oleg2\IdeaProjects\security)
2025-02-15T15:34:35.333+03:00  INFO 15644 --- [main] c.e.c.UserControllerSecurityTest         : No active profile set, falling back to 1 default profile: "default"
2025-02-15T15:34:35.857+03:00  INFO 15644 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-15T15:34:35.901+03:00  INFO 15644 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 37 ms. Found 1 JPA repository interface.
2025-02-15T15:34:36.311+03:00  INFO 15644 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-15T15:34:36.372+03:00  INFO 15644 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-02-15T15:34:36.403+03:00  INFO 15644 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-02-15T15:34:36.623+03:00  INFO 15644 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-15T15:34:36.648+03:00  INFO 15644 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-02-15T15:34:36.814+03:00  INFO 15644 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:companydb user=SA
2025-02-15T15:34:36.815+03:00  INFO 15644 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-02-15T15:34:37.507+03:00  INFO 15644 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-15T15:34:37.550+03:00  INFO 15644 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T15:34:37.936+03:00  WARN 15644 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-02-15T15:34:38.195+03:00  INFO 15644 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1c76b2fe, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7fa2473a, org.springframework.security.web.context.SecurityContextHolderFilter@67062a93, org.springframework.security.web.header.HeaderWriterFilter@2c750b69, org.springframework.web.filter.CorsFilter@47629063, org.springframework.security.web.authentication.logout.LogoutFilter@758ac46, com.example.config.security.LoggingFilter@b9c9bf5, com.example.config.security.JwtAuthenticationFilter@2809e38a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7747571c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@69e308e2, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3d67e3d3, org.springframework.security.web.session.SessionManagementFilter@7552f05b, org.springframework.security.web.access.ExceptionTranslationFilter@26caf4b6, org.springframework.security.web.access.intercept.AuthorizationFilter@3b7b099b]
2025-02-15T15:34:38.403+03:00  INFO 15644 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:companydb'
2025-02-15T15:34:38.470+03:00  INFO 15644 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-02-15T15:34:38.470+03:00  INFO 15644 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-02-15T15:34:38.471+03:00  INFO 15644 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-02-15T15:34:38.491+03:00  INFO 15644 --- [main] c.e.c.UserControllerSecurityTest         : Started UserControllerSecurityTest in 3.407 seconds (process running for 4.226)
2025-02-15T15:34:38.909+03:00 DEBUG 15644 --- [main] o.s.security.web.FilterChainProxy        : Securing GET /user/profile
2025-02-15T15:34:38.913+03:00  INFO 15644 --- [main] c.example.config.security.LoggingFilter  : Method - GET
2025-02-15T15:34:38.913+03:00  INFO 15644 --- [main] c.example.config.security.LoggingFilter  : URL - http://localhost/user/profile
2025-02-15T15:34:38.915+03:00 DEBUG 15644 --- [main] o.s.security.web.FilterChainProxy        : Secured GET /user/profile
2025-02-15T15:34:38.926+03:00 DEBUG 15644 --- [main] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.getProfile(); target is of class [com.example.controller.UserController]
2025-02-15T15:34:38.947+03:00 DEBUG 15644 --- [main] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.getProfile(); target is of class [com.example.controller.UserController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@64ef9b9a and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('USER')]
2025-02-15T15:34:38.949+03:00 DEBUG 15644 --- [main] o.s.s.w.access.AccessDeniedHandlerImpl   : Responding with 403 status code
2025-02-15T15:34:38.949+03:00  INFO 15644 --- [main] c.example.config.security.LoggingFilter  : Response status - 403
2025-02-15T15:34:38.968+03:00 DEBUG 15644 --- [main] o.s.security.web.FilterChainProxy        : Securing POST /user/moderate
2025-02-15T15:34:38.968+03:00  INFO 15644 --- [main] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T15:34:38.968+03:00  INFO 15644 --- [main] c.example.config.security.LoggingFilter  : URL - http://localhost/user/moderate
2025-02-15T15:34:38.968+03:00 DEBUG 15644 --- [main] o.s.security.web.FilterChainProxy        : Secured POST /user/moderate
2025-02-15T15:34:38.969+03:00 DEBUG 15644 --- [main] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.moderateContent(); target is of class [com.example.controller.UserController]
2025-02-15T15:34:38.970+03:00 DEBUG 15644 --- [main] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.moderateContent(); target is of class [com.example.controller.UserController]
2025-02-15T15:34:38.981+03:00  INFO 15644 --- [main] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T15:34:38.986+03:00 DEBUG 15644 --- [main] o.s.security.web.FilterChainProxy        : Securing DELETE /user/1
2025-02-15T15:34:38.986+03:00  INFO 15644 --- [main] c.example.config.security.LoggingFilter  : Method - DELETE
2025-02-15T15:34:38.986+03:00  INFO 15644 --- [main] c.example.config.security.LoggingFilter  : URL - http://localhost/user/1
2025-02-15T15:34:38.986+03:00 DEBUG 15644 --- [main] o.s.security.web.FilterChainProxy        : Secured DELETE /user/1
2025-02-15T15:34:38.992+03:00 DEBUG 15644 --- [main] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.deleteUser(java.lang.Long); target is of class [com.example.controller.UserController]
2025-02-15T15:34:38.993+03:00 DEBUG 15644 --- [main] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.deleteUser(java.lang.Long); target is of class [com.example.controller.UserController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@64ef9b9a and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('SUPER_ADMIN')]
2025-02-15T15:34:38.993+03:00 DEBUG 15644 --- [main] o.s.s.w.access.AccessDeniedHandlerImpl   : Responding with 403 status code
2025-02-15T15:34:38.993+03:00  INFO 15644 --- [main] c.example.config.security.LoggingFilter  : Response status - 403
2025-02-15T15:34:38.997+03:00 DEBUG 15644 --- [main] o.s.security.web.FilterChainProxy        : Securing DELETE /user/1
2025-02-15T15:34:38.997+03:00  INFO 15644 --- [main] c.example.config.security.LoggingFilter  : Method - DELETE
2025-02-15T15:34:38.997+03:00  INFO 15644 --- [main] c.example.config.security.LoggingFilter  : URL - http://localhost/user/1
2025-02-15T15:34:38.998+03:00 DEBUG 15644 --- [main] o.s.security.web.FilterChainProxy        : Secured DELETE /user/1
2025-02-15T15:34:38.998+03:00 DEBUG 15644 --- [main] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.deleteUser(java.lang.Long); target is of class [com.example.controller.UserController]
2025-02-15T15:34:38.998+03:00 DEBUG 15644 --- [main] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.deleteUser(java.lang.Long); target is of class [com.example.controller.UserController]
2025-02-15T15:34:38.999+03:00  INFO 15644 --- [main] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T15:34:39.003+03:00 DEBUG 15644 --- [main] o.s.security.web.FilterChainProxy        : Securing DELETE /user/1
2025-02-15T15:34:39.004+03:00  INFO 15644 --- [main] c.example.config.security.LoggingFilter  : Method - DELETE
2025-02-15T15:34:39.004+03:00  INFO 15644 --- [main] c.example.config.security.LoggingFilter  : URL - http://localhost/user/1
2025-02-15T15:34:39.004+03:00 DEBUG 15644 --- [main] o.s.security.web.FilterChainProxy        : Secured DELETE /user/1
2025-02-15T15:34:39.004+03:00 DEBUG 15644 --- [main] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.deleteUser(java.lang.Long); target is of class [com.example.controller.UserController]
2025-02-15T15:34:39.004+03:00 DEBUG 15644 --- [main] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.deleteUser(java.lang.Long); target is of class [com.example.controller.UserController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@64ef9b9a and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('SUPER_ADMIN')]
2025-02-15T15:34:39.005+03:00 DEBUG 15644 --- [main] o.s.s.w.access.AccessDeniedHandlerImpl   : Responding with 403 status code
2025-02-15T15:34:39.005+03:00  INFO 15644 --- [main] c.example.config.security.LoggingFilter  : Response status - 403
2025-02-15T15:34:39.009+03:00 DEBUG 15644 --- [main] o.s.security.web.FilterChainProxy        : Securing GET /user/profile
2025-02-15T15:34:39.009+03:00  INFO 15644 --- [main] c.example.config.security.LoggingFilter  : Method - GET
2025-02-15T15:34:39.009+03:00  INFO 15644 --- [main] c.example.config.security.LoggingFilter  : URL - http://localhost/user/profile
2025-02-15T15:34:39.009+03:00 DEBUG 15644 --- [main] o.s.security.web.FilterChainProxy        : Secured GET /user/profile
2025-02-15T15:34:39.010+03:00 DEBUG 15644 --- [main] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.getProfile(); target is of class [com.example.controller.UserController]
2025-02-15T15:34:39.010+03:00 DEBUG 15644 --- [main] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.getProfile(); target is of class [com.example.controller.UserController]
2025-02-15T15:34:39.011+03:00  INFO 15644 --- [main] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T15:34:39.015+03:00 DEBUG 15644 --- [main] o.s.security.web.FilterChainProxy        : Securing POST /user/moderate
2025-02-15T15:34:39.016+03:00  INFO 15644 --- [main] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T15:34:39.016+03:00  INFO 15644 --- [main] c.example.config.security.LoggingFilter  : URL - http://localhost/user/moderate
2025-02-15T15:34:39.016+03:00 DEBUG 15644 --- [main] o.s.security.web.FilterChainProxy        : Secured POST /user/moderate
2025-02-15T15:34:39.016+03:00 DEBUG 15644 --- [main] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.moderateContent(); target is of class [com.example.controller.UserController]
2025-02-15T15:34:39.017+03:00 DEBUG 15644 --- [main] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.moderateContent(); target is of class [com.example.controller.UserController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@64ef9b9a and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('MODERATOR') or hasRole('SUPER_ADMIN')]
2025-02-15T15:34:39.017+03:00 DEBUG 15644 --- [main] o.s.s.w.access.AccessDeniedHandlerImpl   : Responding with 403 status code
2025-02-15T15:34:39.017+03:00  INFO 15644 --- [main] c.example.config.security.LoggingFilter  : Response status - 403
2025-02-15T15:34:39.021+03:00 DEBUG 15644 --- [main] o.s.security.web.FilterChainProxy        : Securing GET /user/profile
2025-02-15T15:34:39.021+03:00  INFO 15644 --- [main] c.example.config.security.LoggingFilter  : Method - GET
2025-02-15T15:34:39.022+03:00  INFO 15644 --- [main] c.example.config.security.LoggingFilter  : URL - http://localhost/user/profile
2025-02-15T15:34:39.022+03:00 DEBUG 15644 --- [main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T15:34:39.023+03:00 DEBUG 15644 --- [main] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-02-15T15:34:39.023+03:00  INFO 15644 --- [main] c.example.config.security.LoggingFilter  : Response status - 403
2025-02-15T15:34:39.036+03:00  INFO 15644 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T15:34:39.037+03:00  INFO 15644 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-02-15T15:34:39.039+03:00  INFO 15644 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-02-15T15:35:18.084+03:00  INFO 8476 --- [main] c.e.c.UserControllerSecurityTest         : Starting UserControllerSecurityTest using Java 21.0.5 with PID 8476 (started by oleg2 in C:\Users\oleg2\IdeaProjects\security)
2025-02-15T15:35:18.085+03:00  INFO 8476 --- [main] c.e.c.UserControllerSecurityTest         : No active profile set, falling back to 1 default profile: "default"
2025-02-15T15:35:18.610+03:00  INFO 8476 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-15T15:35:18.653+03:00  INFO 8476 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 35 ms. Found 1 JPA repository interface.
2025-02-15T15:35:19.058+03:00  INFO 8476 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-15T15:35:19.111+03:00  INFO 8476 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-02-15T15:35:19.144+03:00  INFO 8476 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-02-15T15:35:19.369+03:00  INFO 8476 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-15T15:35:19.397+03:00  INFO 8476 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-02-15T15:35:19.549+03:00  INFO 8476 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:companydb user=SA
2025-02-15T15:35:19.550+03:00  INFO 8476 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-02-15T15:35:20.235+03:00  INFO 8476 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-15T15:35:20.276+03:00  INFO 8476 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T15:35:20.672+03:00  WARN 8476 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-02-15T15:35:20.949+03:00  INFO 8476 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@30cb489a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@401d83ce, org.springframework.security.web.context.SecurityContextHolderFilter@4dc5b887, org.springframework.security.web.header.HeaderWriterFilter@5776a9f8, org.springframework.web.filter.CorsFilter@3b7b099b, org.springframework.security.web.authentication.logout.LogoutFilter@67eabe02, com.example.config.security.LoggingFilter@79454d8e, com.example.config.security.JwtAuthenticationFilter@3777fc44, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7552f05b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@524418a2, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5abc488d, org.springframework.security.web.session.SessionManagementFilter@3b39bee2, org.springframework.security.web.access.ExceptionTranslationFilter@28b16193, org.springframework.security.web.access.intercept.AuthorizationFilter@2a7b4bb6]
2025-02-15T15:35:21.161+03:00  INFO 8476 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:companydb'
2025-02-15T15:35:21.263+03:00  INFO 8476 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-02-15T15:35:21.264+03:00  INFO 8476 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-02-15T15:35:21.265+03:00  INFO 8476 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-02-15T15:35:21.285+03:00  INFO 8476 --- [main] c.e.c.UserControllerSecurityTest         : Started UserControllerSecurityTest in 3.452 seconds (process running for 4.252)
2025-02-15T15:35:21.725+03:00 DEBUG 8476 --- [main] o.s.security.web.FilterChainProxy        : Securing GET /user/profile
2025-02-15T15:35:21.729+03:00  INFO 8476 --- [main] c.example.config.security.LoggingFilter  : Method - GET
2025-02-15T15:35:21.730+03:00  INFO 8476 --- [main] c.example.config.security.LoggingFilter  : URL - http://localhost/user/profile
2025-02-15T15:35:21.732+03:00 DEBUG 8476 --- [main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T15:35:21.733+03:00 DEBUG 8476 --- [main] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-02-15T15:35:21.733+03:00  INFO 8476 --- [main] c.example.config.security.LoggingFilter  : Response status - 403
2025-02-15T15:35:21.756+03:00  INFO 8476 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T15:35:21.757+03:00  INFO 8476 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-02-15T15:35:21.758+03:00  INFO 8476 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-02-15T15:36:25.902+03:00  INFO 10968 --- [main] c.e.c.UserControllerSecurityTest         : Starting UserControllerSecurityTest using Java 21.0.5 with PID 10968 (started by oleg2 in C:\Users\oleg2\IdeaProjects\security)
2025-02-15T15:36:25.903+03:00  INFO 10968 --- [main] c.e.c.UserControllerSecurityTest         : No active profile set, falling back to 1 default profile: "default"
2025-02-15T15:36:26.486+03:00  INFO 10968 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-15T15:36:26.531+03:00  INFO 10968 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 37 ms. Found 1 JPA repository interface.
2025-02-15T15:36:26.962+03:00  INFO 10968 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-15T15:36:27.019+03:00  INFO 10968 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-02-15T15:36:27.049+03:00  INFO 10968 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-02-15T15:36:27.278+03:00  INFO 10968 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-15T15:36:27.306+03:00  INFO 10968 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-02-15T15:36:27.466+03:00  INFO 10968 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:companydb user=SA
2025-02-15T15:36:27.468+03:00  INFO 10968 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-02-15T15:36:28.153+03:00  INFO 10968 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-15T15:36:28.195+03:00  INFO 10968 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T15:36:28.575+03:00  WARN 10968 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-02-15T15:36:28.848+03:00  INFO 10968 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@498f1f63, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6250d33c, org.springframework.security.web.context.SecurityContextHolderFilter@209d0037, org.springframework.security.web.header.HeaderWriterFilter@4e93d23e, org.springframework.web.filter.CorsFilter@2a7b4bb6, org.springframework.security.web.authentication.logout.LogoutFilter@682270ff, com.example.config.security.LoggingFilter@7ab2e018, com.example.config.security.JwtAuthenticationFilter@79454d8e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3b39bee2, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@20ddc780, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@65a3d7c9, org.springframework.security.web.session.SessionManagementFilter@5f6ba085, org.springframework.security.web.access.ExceptionTranslationFilter@3733b1f4, org.springframework.security.web.access.intercept.AuthorizationFilter@593e594f]
2025-02-15T15:36:29.063+03:00  INFO 10968 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:companydb'
2025-02-15T15:36:29.133+03:00  INFO 10968 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-02-15T15:36:29.133+03:00  INFO 10968 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-02-15T15:36:29.134+03:00  INFO 10968 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-02-15T15:36:29.156+03:00  INFO 10968 --- [main] c.e.c.UserControllerSecurityTest         : Started UserControllerSecurityTest in 3.504 seconds (process running for 4.336)
2025-02-15T15:36:29.585+03:00 DEBUG 10968 --- [main] o.s.security.web.FilterChainProxy        : Securing GET /user/profile
2025-02-15T15:36:29.591+03:00  INFO 10968 --- [main] c.example.config.security.LoggingFilter  : Method - GET
2025-02-15T15:36:29.591+03:00  INFO 10968 --- [main] c.example.config.security.LoggingFilter  : URL - http://localhost/user/profile
2025-02-15T15:36:29.592+03:00 DEBUG 10968 --- [main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T15:36:29.593+03:00 DEBUG 10968 --- [main] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-02-15T15:36:29.594+03:00  INFO 10968 --- [main] c.example.config.security.LoggingFilter  : Response status - 403
2025-02-15T15:36:29.618+03:00  INFO 10968 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T15:36:29.619+03:00  INFO 10968 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-02-15T15:36:29.620+03:00  INFO 10968 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-02-15T15:36:32.976+03:00  INFO 6276 --- [main] c.e.c.UserControllerSecurityTest         : Starting UserControllerSecurityTest using Java 21.0.5 with PID 6276 (started by oleg2 in C:\Users\oleg2\IdeaProjects\security)
2025-02-15T15:36:32.978+03:00  INFO 6276 --- [main] c.e.c.UserControllerSecurityTest         : No active profile set, falling back to 1 default profile: "default"
2025-02-15T15:36:33.519+03:00  INFO 6276 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-15T15:36:33.561+03:00  INFO 6276 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 35 ms. Found 1 JPA repository interface.
2025-02-15T15:36:34.006+03:00  INFO 6276 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-15T15:36:34.061+03:00  INFO 6276 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-02-15T15:36:34.096+03:00  INFO 6276 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-02-15T15:36:34.323+03:00  INFO 6276 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-15T15:36:34.350+03:00  INFO 6276 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-02-15T15:36:34.512+03:00  INFO 6276 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:companydb user=SA
2025-02-15T15:36:34.514+03:00  INFO 6276 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-02-15T15:36:35.197+03:00  INFO 6276 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-15T15:36:35.239+03:00  INFO 6276 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T15:36:35.626+03:00  WARN 6276 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-02-15T15:36:35.887+03:00  INFO 6276 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@593e594f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3a1e5fa7, org.springframework.security.web.context.SecurityContextHolderFilter@5f6ba085, org.springframework.security.web.header.HeaderWriterFilter@53dd29e0, org.springframework.web.filter.CorsFilter@7866fe3e, org.springframework.security.web.authentication.logout.LogoutFilter@951461a, com.example.config.security.LoggingFilter@1fc386f8, com.example.config.security.JwtAuthenticationFilter@576323ff, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@26f7b114, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@209d0037, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@498f1f63, org.springframework.security.web.session.SessionManagementFilter@29f114e0, org.springframework.security.web.access.ExceptionTranslationFilter@6c056020, org.springframework.security.web.access.intercept.AuthorizationFilter@79735611]
2025-02-15T15:36:36.111+03:00  INFO 6276 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:companydb'
2025-02-15T15:36:36.177+03:00  INFO 6276 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-02-15T15:36:36.177+03:00  INFO 6276 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-02-15T15:36:36.178+03:00  INFO 6276 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-02-15T15:36:36.197+03:00  INFO 6276 --- [main] c.e.c.UserControllerSecurityTest         : Started UserControllerSecurityTest in 3.47 seconds (process running for 4.323)
2025-02-15T15:36:36.601+03:00 DEBUG 6276 --- [main] o.s.security.web.FilterChainProxy        : Securing POST /user/moderate
2025-02-15T15:36:36.605+03:00  INFO 6276 --- [main] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T15:36:36.605+03:00  INFO 6276 --- [main] c.example.config.security.LoggingFilter  : URL - http://localhost/user/moderate
2025-02-15T15:36:36.606+03:00 DEBUG 6276 --- [main] o.s.security.web.FilterChainProxy        : Secured POST /user/moderate
2025-02-15T15:36:36.618+03:00 DEBUG 6276 --- [main] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.moderateContent(); target is of class [com.example.controller.UserController]
2025-02-15T15:36:36.640+03:00 DEBUG 6276 --- [main] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.moderateContent(); target is of class [com.example.controller.UserController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@4a234e1f and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('MODERATOR') or hasRole('SUPER_ADMIN')]
2025-02-15T15:36:36.642+03:00 DEBUG 6276 --- [main] o.s.s.w.access.AccessDeniedHandlerImpl   : Responding with 403 status code
2025-02-15T15:36:36.642+03:00  INFO 6276 --- [main] c.example.config.security.LoggingFilter  : Response status - 403
2025-02-15T15:36:36.668+03:00  INFO 6276 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T15:36:36.670+03:00  INFO 6276 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-02-15T15:36:36.671+03:00  INFO 6276 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-02-15T15:36:45.306+03:00  INFO 11796 --- [main] c.e.c.UserControllerSecurityTest         : Starting UserControllerSecurityTest using Java 21.0.5 with PID 11796 (started by oleg2 in C:\Users\oleg2\IdeaProjects\security)
2025-02-15T15:36:45.307+03:00  INFO 11796 --- [main] c.e.c.UserControllerSecurityTest         : No active profile set, falling back to 1 default profile: "default"
2025-02-15T15:36:45.829+03:00  INFO 11796 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-15T15:36:45.872+03:00  INFO 11796 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 37 ms. Found 1 JPA repository interface.
2025-02-15T15:36:46.284+03:00  INFO 11796 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-15T15:36:46.345+03:00  INFO 11796 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-02-15T15:36:46.376+03:00  INFO 11796 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-02-15T15:36:46.600+03:00  INFO 11796 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-15T15:36:46.625+03:00  INFO 11796 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-02-15T15:36:46.786+03:00  INFO 11796 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:companydb user=SA
2025-02-15T15:36:46.787+03:00  INFO 11796 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-02-15T15:36:47.483+03:00  INFO 11796 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-15T15:36:47.527+03:00  INFO 11796 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T15:36:47.904+03:00  WARN 11796 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-02-15T15:36:48.171+03:00  INFO 11796 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7fa2473a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@47629063, org.springframework.security.web.context.SecurityContextHolderFilter@5b4ce00, org.springframework.security.web.header.HeaderWriterFilter@159a0f0e, org.springframework.web.filter.CorsFilter@3d67e3d3, org.springframework.security.web.authentication.logout.LogoutFilter@4d2f8ee7, com.example.config.security.LoggingFilter@3b399f5a, com.example.config.security.JwtAuthenticationFilter@b9c9bf5, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@69e308e2, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3f67f5ff, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@14af57c3, org.springframework.security.web.session.SessionManagementFilter@524418a2, org.springframework.security.web.access.ExceptionTranslationFilter@4411a0fe, org.springframework.security.web.access.intercept.AuthorizationFilter@5abc488d]
2025-02-15T15:36:48.380+03:00  INFO 11796 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:companydb'
2025-02-15T15:36:48.461+03:00  INFO 11796 --- [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-02-15T15:36:48.461+03:00  INFO 11796 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-02-15T15:36:48.462+03:00  INFO 11796 --- [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-02-15T15:36:48.483+03:00  INFO 11796 --- [main] c.e.c.UserControllerSecurityTest         : Started UserControllerSecurityTest in 3.431 seconds (process running for 4.223)
2025-02-15T15:36:48.875+03:00 DEBUG 11796 --- [main] o.s.security.web.FilterChainProxy        : Securing GET /user/profile
2025-02-15T15:36:48.879+03:00  INFO 11796 --- [main] c.example.config.security.LoggingFilter  : Method - GET
2025-02-15T15:36:48.880+03:00  INFO 11796 --- [main] c.example.config.security.LoggingFilter  : URL - http://localhost/user/profile
2025-02-15T15:36:48.881+03:00 DEBUG 11796 --- [main] o.s.security.web.FilterChainProxy        : Secured GET /user/profile
2025-02-15T15:36:48.893+03:00 DEBUG 11796 --- [main] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.getProfile(); target is of class [com.example.controller.UserController]
2025-02-15T15:36:48.914+03:00 DEBUG 11796 --- [main] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.getProfile(); target is of class [com.example.controller.UserController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@7640a191 and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('USER')]
2025-02-15T15:36:48.917+03:00 DEBUG 11796 --- [main] o.s.s.w.access.AccessDeniedHandlerImpl   : Responding with 403 status code
2025-02-15T15:36:48.917+03:00  INFO 11796 --- [main] c.example.config.security.LoggingFilter  : Response status - 403
2025-02-15T15:36:48.936+03:00 DEBUG 11796 --- [main] o.s.security.web.FilterChainProxy        : Securing POST /user/moderate
2025-02-15T15:36:48.936+03:00  INFO 11796 --- [main] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T15:36:48.936+03:00  INFO 11796 --- [main] c.example.config.security.LoggingFilter  : URL - http://localhost/user/moderate
2025-02-15T15:36:48.936+03:00 DEBUG 11796 --- [main] o.s.security.web.FilterChainProxy        : Secured POST /user/moderate
2025-02-15T15:36:48.937+03:00 DEBUG 11796 --- [main] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.moderateContent(); target is of class [com.example.controller.UserController]
2025-02-15T15:36:48.938+03:00 DEBUG 11796 --- [main] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.moderateContent(); target is of class [com.example.controller.UserController]
2025-02-15T15:36:48.948+03:00  INFO 11796 --- [main] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T15:36:48.954+03:00 DEBUG 11796 --- [main] o.s.security.web.FilterChainProxy        : Securing DELETE /user/1
2025-02-15T15:36:48.954+03:00  INFO 11796 --- [main] c.example.config.security.LoggingFilter  : Method - DELETE
2025-02-15T15:36:48.954+03:00  INFO 11796 --- [main] c.example.config.security.LoggingFilter  : URL - http://localhost/user/1
2025-02-15T15:36:48.954+03:00 DEBUG 11796 --- [main] o.s.security.web.FilterChainProxy        : Secured DELETE /user/1
2025-02-15T15:36:48.960+03:00 DEBUG 11796 --- [main] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.deleteUser(java.lang.Long); target is of class [com.example.controller.UserController]
2025-02-15T15:36:48.961+03:00 DEBUG 11796 --- [main] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.deleteUser(java.lang.Long); target is of class [com.example.controller.UserController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@7640a191 and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('SUPER_ADMIN')]
2025-02-15T15:36:48.961+03:00 DEBUG 11796 --- [main] o.s.s.w.access.AccessDeniedHandlerImpl   : Responding with 403 status code
2025-02-15T15:36:48.961+03:00  INFO 11796 --- [main] c.example.config.security.LoggingFilter  : Response status - 403
2025-02-15T15:36:48.966+03:00 DEBUG 11796 --- [main] o.s.security.web.FilterChainProxy        : Securing DELETE /user/1
2025-02-15T15:36:48.967+03:00  INFO 11796 --- [main] c.example.config.security.LoggingFilter  : Method - DELETE
2025-02-15T15:36:48.967+03:00  INFO 11796 --- [main] c.example.config.security.LoggingFilter  : URL - http://localhost/user/1
2025-02-15T15:36:48.967+03:00 DEBUG 11796 --- [main] o.s.security.web.FilterChainProxy        : Secured DELETE /user/1
2025-02-15T15:36:48.967+03:00 DEBUG 11796 --- [main] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.deleteUser(java.lang.Long); target is of class [com.example.controller.UserController]
2025-02-15T15:36:48.968+03:00 DEBUG 11796 --- [main] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.deleteUser(java.lang.Long); target is of class [com.example.controller.UserController]
2025-02-15T15:36:48.969+03:00  INFO 11796 --- [main] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T15:36:48.974+03:00 DEBUG 11796 --- [main] o.s.security.web.FilterChainProxy        : Securing DELETE /user/1
2025-02-15T15:36:48.974+03:00  INFO 11796 --- [main] c.example.config.security.LoggingFilter  : Method - DELETE
2025-02-15T15:36:48.974+03:00  INFO 11796 --- [main] c.example.config.security.LoggingFilter  : URL - http://localhost/user/1
2025-02-15T15:36:48.974+03:00 DEBUG 11796 --- [main] o.s.security.web.FilterChainProxy        : Secured DELETE /user/1
2025-02-15T15:36:48.975+03:00 DEBUG 11796 --- [main] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.deleteUser(java.lang.Long); target is of class [com.example.controller.UserController]
2025-02-15T15:36:48.975+03:00 DEBUG 11796 --- [main] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.deleteUser(java.lang.Long); target is of class [com.example.controller.UserController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@7640a191 and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('SUPER_ADMIN')]
2025-02-15T15:36:48.975+03:00 DEBUG 11796 --- [main] o.s.s.w.access.AccessDeniedHandlerImpl   : Responding with 403 status code
2025-02-15T15:36:48.975+03:00  INFO 11796 --- [main] c.example.config.security.LoggingFilter  : Response status - 403
2025-02-15T15:36:48.979+03:00 DEBUG 11796 --- [main] o.s.security.web.FilterChainProxy        : Securing GET /user/profile
2025-02-15T15:36:48.980+03:00  INFO 11796 --- [main] c.example.config.security.LoggingFilter  : Method - GET
2025-02-15T15:36:48.980+03:00  INFO 11796 --- [main] c.example.config.security.LoggingFilter  : URL - http://localhost/user/profile
2025-02-15T15:36:48.980+03:00 DEBUG 11796 --- [main] o.s.security.web.FilterChainProxy        : Secured GET /user/profile
2025-02-15T15:36:48.980+03:00 DEBUG 11796 --- [main] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.getProfile(); target is of class [com.example.controller.UserController]
2025-02-15T15:36:48.981+03:00 DEBUG 11796 --- [main] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.getProfile(); target is of class [com.example.controller.UserController]
2025-02-15T15:36:48.981+03:00  INFO 11796 --- [main] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T15:36:48.985+03:00 DEBUG 11796 --- [main] o.s.security.web.FilterChainProxy        : Securing POST /user/moderate
2025-02-15T15:36:48.986+03:00  INFO 11796 --- [main] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T15:36:48.986+03:00  INFO 11796 --- [main] c.example.config.security.LoggingFilter  : URL - http://localhost/user/moderate
2025-02-15T15:36:48.986+03:00 DEBUG 11796 --- [main] o.s.security.web.FilterChainProxy        : Secured POST /user/moderate
2025-02-15T15:36:48.986+03:00 DEBUG 11796 --- [main] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.moderateContent(); target is of class [com.example.controller.UserController]
2025-02-15T15:36:48.987+03:00 DEBUG 11796 --- [main] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.moderateContent(); target is of class [com.example.controller.UserController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@7640a191 and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('MODERATOR') or hasRole('SUPER_ADMIN')]
2025-02-15T15:36:48.987+03:00 DEBUG 11796 --- [main] o.s.s.w.access.AccessDeniedHandlerImpl   : Responding with 403 status code
2025-02-15T15:36:48.987+03:00  INFO 11796 --- [main] c.example.config.security.LoggingFilter  : Response status - 403
2025-02-15T15:36:48.991+03:00 DEBUG 11796 --- [main] o.s.security.web.FilterChainProxy        : Securing GET /user/profile
2025-02-15T15:36:48.992+03:00  INFO 11796 --- [main] c.example.config.security.LoggingFilter  : Method - GET
2025-02-15T15:36:48.992+03:00  INFO 11796 --- [main] c.example.config.security.LoggingFilter  : URL - http://localhost/user/profile
2025-02-15T15:36:48.992+03:00 DEBUG 11796 --- [main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T15:36:48.993+03:00 DEBUG 11796 --- [main] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-02-15T15:36:48.993+03:00  INFO 11796 --- [main] c.example.config.security.LoggingFilter  : Response status - 403
2025-02-15T15:36:49.001+03:00  INFO 11796 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T15:36:49.002+03:00  INFO 11796 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-02-15T15:36:49.004+03:00  INFO 11796 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-02-15T18:48:27.056+03:00  INFO 17396 --- [main] com.example.MainApp                      : Starting MainApp using Java 21.0.5 with PID 17396 (C:\Users\oleg2\IdeaProjects\security\target\classes started by oleg2 in C:\Users\oleg2\IdeaProjects\security)
2025-02-15T18:48:27.058+03:00  INFO 17396 --- [main] com.example.MainApp                      : No active profile set, falling back to 1 default profile: "default"
2025-02-15T18:48:27.675+03:00  INFO 17396 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-15T18:48:27.724+03:00  INFO 17396 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 43 ms. Found 1 JPA repository interface.
2025-02-15T18:48:28.225+03:00  INFO 17396 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-02-15T18:48:28.237+03:00  INFO 17396 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-02-15T18:48:28.237+03:00  INFO 17396 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-02-15T18:48:28.290+03:00  INFO 17396 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-02-15T18:48:28.291+03:00  INFO 17396 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1198 ms
2025-02-15T18:48:28.320+03:00  INFO 17396 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-02-15T18:48:28.491+03:00  INFO 17396 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:companydb user=SA
2025-02-15T18:48:28.492+03:00  INFO 17396 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-02-15T18:48:28.502+03:00  INFO 17396 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:companydb'
2025-02-15T18:48:28.601+03:00  INFO 17396 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-15T18:48:28.651+03:00  INFO 17396 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-02-15T18:48:28.681+03:00  INFO 17396 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-02-15T18:48:28.885+03:00  INFO 17396 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-15T18:48:29.581+03:00  INFO 17396 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-15T18:48:29.619+03:00  INFO 17396 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T18:48:29.983+03:00  WARN 17396 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-02-15T18:48:30.203+03:00  INFO 17396 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@66428512, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@e21d73, org.springframework.security.web.context.SecurityContextHolderFilter@7f9b851c, org.springframework.security.web.header.HeaderWriterFilter@7a023e34, org.springframework.web.filter.CorsFilter@7a482b3a, org.springframework.security.web.authentication.logout.LogoutFilter@67521a79, com.example.config.security.LoggingFilter@6d7772d3, com.example.config.security.JwtAuthenticationFilter@6ba0dcba, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@6e111aeb, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@22657db1, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@600b3bee, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4d529bc0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@429dde4d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@129348e8, org.springframework.security.web.session.SessionManagementFilter@65fe1f47, org.springframework.security.web.access.ExceptionTranslationFilter@63541cd4, org.springframework.security.web.access.intercept.AuthorizationFilter@7b9b6a56]
2025-02-15T18:48:30.381+03:00  INFO 17396 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-02-15T18:48:30.388+03:00  INFO 17396 --- [main] com.example.MainApp                      : Started MainApp in 3.694 seconds (process running for 4.492)
2025-02-15T18:49:04.535+03:00  INFO 17396 --- [http-nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-15T18:49:04.535+03:00  INFO 17396 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-02-15T18:49:04.536+03:00  INFO 17396 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-02-15T18:49:04.547+03:00 DEBUG 17396 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /login/register
2025-02-15T18:49:04.551+03:00  INFO 17396 --- [http-nio-8080-exec-2] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T18:49:04.551+03:00  INFO 17396 --- [http-nio-8080-exec-2] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login/register
2025-02-15T18:49:04.553+03:00 DEBUG 17396 --- [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T18:49:04.554+03:00 DEBUG 17396 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /login/register
2025-02-15T18:49:04.725+03:00  INFO 17396 --- [http-nio-8080-exec-2] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T18:49:11.807+03:00 DEBUG 17396 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /login
2025-02-15T18:49:11.807+03:00  INFO 17396 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T18:49:11.807+03:00  INFO 17396 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login
2025-02-15T18:49:12.027+03:00 DEBUG 17396 --- [http-nio-8080-exec-3] o.s.s.a.dao.DaoAuthenticationProvider    : Failed to find user ''
2025-02-15T18:49:12.027+03:00  WARN 17396 --- [http-nio-8080-exec-3] c.e.config.security.SecurityConfig       : Failed login attempt for user: null
2025-02-15T18:49:12.027+03:00  INFO 17396 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : Response status - 401
2025-02-15T18:49:12.027+03:00  WARN 17396 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : Login failed for user: null
2025-02-15T18:49:12.032+03:00 DEBUG 17396 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /error
2025-02-15T18:49:12.033+03:00 DEBUG 17396 --- [http-nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T18:49:12.035+03:00 DEBUG 17396 --- [http-nio-8080-exec-3] o.s.s.web.DefaultRedirectStrategy        : Redirecting to http://localhost:8080/login
2025-02-15T18:49:12.042+03:00 DEBUG 17396 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /login
2025-02-15T18:49:12.043+03:00  INFO 17396 --- [http-nio-8080-exec-4] c.example.config.security.LoggingFilter  : Method - GET
2025-02-15T18:49:12.043+03:00  INFO 17396 --- [http-nio-8080-exec-4] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login
2025-02-15T18:49:12.044+03:00  INFO 17396 --- [http-nio-8080-exec-4] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T18:50:21.157+03:00 DEBUG 17396 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /login/register
2025-02-15T18:50:21.158+03:00  INFO 17396 --- [http-nio-8080-exec-7] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T18:50:21.158+03:00  INFO 17396 --- [http-nio-8080-exec-7] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login/register
2025-02-15T18:50:21.158+03:00 DEBUG 17396 --- [http-nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T18:50:21.158+03:00 DEBUG 17396 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /login/register
2025-02-15T18:50:21.245+03:00  INFO 17396 --- [http-nio-8080-exec-7] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T18:50:24.767+03:00 DEBUG 17396 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /login
2025-02-15T18:50:24.768+03:00  INFO 17396 --- [http-nio-8080-exec-8] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T18:50:24.768+03:00  INFO 17396 --- [http-nio-8080-exec-8] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login
2025-02-15T18:50:24.823+03:00 DEBUG 17396 --- [http-nio-8080-exec-8] o.s.s.a.dao.DaoAuthenticationProvider    : Failed to find user ''
2025-02-15T18:50:24.824+03:00  WARN 17396 --- [http-nio-8080-exec-8] c.e.config.security.SecurityConfig       : Failed login attempt for user: null
2025-02-15T18:50:24.824+03:00  INFO 17396 --- [http-nio-8080-exec-8] c.example.config.security.LoggingFilter  : Response status - 401
2025-02-15T18:50:24.824+03:00  WARN 17396 --- [http-nio-8080-exec-8] c.example.config.security.LoggingFilter  : Login failed for user: null
2025-02-15T18:50:24.824+03:00 DEBUG 17396 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /error
2025-02-15T18:50:24.825+03:00 DEBUG 17396 --- [http-nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T18:50:24.825+03:00 DEBUG 17396 --- [http-nio-8080-exec-8] o.s.s.web.DefaultRedirectStrategy        : Redirecting to http://localhost:8080/login
2025-02-15T18:50:24.827+03:00 DEBUG 17396 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /login
2025-02-15T18:50:24.827+03:00  INFO 17396 --- [http-nio-8080-exec-9] c.example.config.security.LoggingFilter  : Method - GET
2025-02-15T18:50:24.827+03:00  INFO 17396 --- [http-nio-8080-exec-9] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login
2025-02-15T18:50:24.828+03:00  INFO 17396 --- [http-nio-8080-exec-9] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T18:50:48.678+03:00  INFO 17396 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T18:50:48.680+03:00  INFO 17396 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-02-15T18:50:48.681+03:00  INFO 17396 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-02-15T18:50:51.291+03:00  INFO 8364 --- [main] com.example.MainApp                      : Starting MainApp using Java 21.0.5 with PID 8364 (C:\Users\oleg2\IdeaProjects\security\target\classes started by oleg2 in C:\Users\oleg2\IdeaProjects\security)
2025-02-15T18:50:51.292+03:00  INFO 8364 --- [main] com.example.MainApp                      : No active profile set, falling back to 1 default profile: "default"
2025-02-15T18:50:51.870+03:00  INFO 8364 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-15T18:50:51.917+03:00  INFO 8364 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 40 ms. Found 1 JPA repository interface.
2025-02-15T18:50:52.441+03:00  INFO 8364 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-02-15T18:50:52.452+03:00  INFO 8364 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-02-15T18:50:52.452+03:00  INFO 8364 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-02-15T18:50:52.501+03:00  INFO 8364 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-02-15T18:50:52.501+03:00  INFO 8364 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1177 ms
2025-02-15T18:50:52.529+03:00  INFO 8364 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-02-15T18:50:52.700+03:00  INFO 8364 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:companydb user=SA
2025-02-15T18:50:52.702+03:00  INFO 8364 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-02-15T18:50:52.711+03:00  INFO 8364 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:companydb'
2025-02-15T18:50:52.809+03:00  INFO 8364 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-15T18:50:52.854+03:00  INFO 8364 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-02-15T18:50:52.885+03:00  INFO 8364 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-02-15T18:50:53.074+03:00  INFO 8364 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-15T18:50:53.718+03:00  INFO 8364 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-15T18:50:53.758+03:00  INFO 8364 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T18:50:54.147+03:00  WARN 8364 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-02-15T18:50:54.392+03:00  INFO 8364 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@e21d73, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7a482b3a, org.springframework.security.web.context.SecurityContextHolderFilter@6a8ab98f, org.springframework.security.web.header.HeaderWriterFilter@260f05ee, org.springframework.web.filter.CorsFilter@600b3bee, org.springframework.security.web.authentication.logout.LogoutFilter@73839f22, com.example.config.security.LoggingFilter@5afba80c, com.example.config.security.JwtAuthenticationFilter@37d3e740, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@55a5eea3, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@58b30e3e, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@129348e8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@429dde4d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@610d0067, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@20ad64c, org.springframework.security.web.session.SessionManagementFilter@4afdb05e, org.springframework.security.web.access.ExceptionTranslationFilter@2111d7b9, org.springframework.security.web.access.intercept.AuthorizationFilter@6e111aeb]
2025-02-15T18:50:54.587+03:00  INFO 8364 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-02-15T18:50:54.609+03:00  INFO 8364 --- [main] com.example.MainApp                      : Started MainApp in 3.667 seconds (process running for 3.962)
2025-02-15T18:51:07.321+03:00  INFO 8364 --- [http-nio-8080-exec-6] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-15T18:51:07.321+03:00  INFO 8364 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-02-15T18:51:07.322+03:00  INFO 8364 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-02-15T18:51:07.334+03:00 DEBUG 8364 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /login/register
2025-02-15T18:51:07.338+03:00  INFO 8364 --- [http-nio-8080-exec-6] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T18:51:07.338+03:00  INFO 8364 --- [http-nio-8080-exec-6] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login/register
2025-02-15T18:51:07.340+03:00 DEBUG 8364 --- [http-nio-8080-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T18:51:07.341+03:00 DEBUG 8364 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /login/register
2025-02-15T18:51:07.514+03:00  INFO 8364 --- [http-nio-8080-exec-6] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T18:51:09.593+03:00 DEBUG 8364 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /login
2025-02-15T18:51:09.593+03:00  INFO 8364 --- [http-nio-8080-exec-2] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T18:51:09.593+03:00  INFO 8364 --- [http-nio-8080-exec-2] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login
2025-02-15T18:51:09.802+03:00 DEBUG 8364 --- [http-nio-8080-exec-2] o.s.s.a.dao.DaoAuthenticationProvider    : Failed to find user ''
2025-02-15T18:51:09.803+03:00  WARN 8364 --- [http-nio-8080-exec-2] c.e.config.security.SecurityConfig       : Failed login attempt for user: null
2025-02-15T18:51:09.803+03:00  INFO 8364 --- [http-nio-8080-exec-2] c.example.config.security.LoggingFilter  : Response status - 401
2025-02-15T18:51:09.803+03:00  WARN 8364 --- [http-nio-8080-exec-2] c.example.config.security.LoggingFilter  : Login failed for user: null
2025-02-15T18:51:09.807+03:00 DEBUG 8364 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /error
2025-02-15T18:51:09.807+03:00 DEBUG 8364 --- [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T18:51:09.809+03:00 DEBUG 8364 --- [http-nio-8080-exec-2] o.s.s.web.DefaultRedirectStrategy        : Redirecting to http://localhost:8080/login
2025-02-15T18:51:09.814+03:00 DEBUG 8364 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /login
2025-02-15T18:51:09.814+03:00  INFO 8364 --- [http-nio-8080-exec-7] c.example.config.security.LoggingFilter  : Method - GET
2025-02-15T18:51:09.814+03:00  INFO 8364 --- [http-nio-8080-exec-7] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login
2025-02-15T18:51:09.816+03:00  INFO 8364 --- [http-nio-8080-exec-7] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T18:51:59.669+03:00  INFO 8364 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T18:51:59.671+03:00  INFO 8364 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-02-15T18:51:59.672+03:00  INFO 8364 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-02-15T18:52:02.810+03:00  INFO 10736 --- [main] com.example.MainApp                      : Starting MainApp using Java 21.0.5 with PID 10736 (C:\Users\oleg2\IdeaProjects\security\target\classes started by oleg2 in C:\Users\oleg2\IdeaProjects\security)
2025-02-15T18:52:02.812+03:00  INFO 10736 --- [main] com.example.MainApp                      : No active profile set, falling back to 1 default profile: "default"
2025-02-15T18:52:03.379+03:00  INFO 10736 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-15T18:52:03.423+03:00  INFO 10736 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 38 ms. Found 1 JPA repository interface.
2025-02-15T18:52:03.953+03:00  INFO 10736 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-02-15T18:52:03.965+03:00  INFO 10736 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-02-15T18:52:03.965+03:00  INFO 10736 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-02-15T18:52:04.019+03:00  INFO 10736 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-02-15T18:52:04.020+03:00  INFO 10736 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1174 ms
2025-02-15T18:52:04.046+03:00  INFO 10736 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-02-15T18:52:04.215+03:00  INFO 10736 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:companydb user=SA
2025-02-15T18:52:04.217+03:00  INFO 10736 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-02-15T18:52:04.226+03:00  INFO 10736 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:companydb'
2025-02-15T18:52:04.333+03:00  INFO 10736 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-15T18:52:04.381+03:00  INFO 10736 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-02-15T18:52:04.408+03:00  INFO 10736 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-02-15T18:52:04.608+03:00  INFO 10736 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-15T18:52:05.280+03:00  INFO 10736 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-15T18:52:05.318+03:00  INFO 10736 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T18:52:05.682+03:00  WARN 10736 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-02-15T18:52:05.938+03:00  INFO 10736 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6f9b5f01, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6859bbd4, org.springframework.security.web.context.SecurityContextHolderFilter@73c1dda3, org.springframework.security.web.header.HeaderWriterFilter@6672b0ea, org.springframework.web.filter.CorsFilter@4a225014, org.springframework.security.web.authentication.logout.LogoutFilter@71db6703, com.example.config.security.LoggingFilter@478cc5f1, com.example.config.security.JwtAuthenticationFilter@912a644, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5e75cf7a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6f12fca0, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7d836c4a, org.springframework.security.web.session.SessionManagementFilter@441762b8, org.springframework.security.web.access.ExceptionTranslationFilter@18d09283, org.springframework.security.web.access.intercept.AuthorizationFilter@2c257c0a]
2025-02-15T18:52:06.117+03:00  INFO 10736 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-02-15T18:52:06.124+03:00  INFO 10736 --- [main] com.example.MainApp                      : Started MainApp in 3.72 seconds (process running for 4.025)
2025-02-15T18:52:10.246+03:00  INFO 10736 --- [http-nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-15T18:52:10.246+03:00  INFO 10736 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-02-15T18:52:10.247+03:00  INFO 10736 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-02-15T18:52:10.259+03:00 DEBUG 10736 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /login/register
2025-02-15T18:52:10.262+03:00  INFO 10736 --- [http-nio-8080-exec-2] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T18:52:10.263+03:00  INFO 10736 --- [http-nio-8080-exec-2] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login/register
2025-02-15T18:52:10.265+03:00 DEBUG 10736 --- [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T18:52:10.266+03:00 DEBUG 10736 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /login/register
2025-02-15T18:52:10.436+03:00  INFO 10736 --- [http-nio-8080-exec-2] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T18:52:13.124+03:00 DEBUG 10736 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /login
2025-02-15T18:52:13.125+03:00  INFO 10736 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T18:52:13.125+03:00  INFO 10736 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login
2025-02-15T18:52:13.125+03:00 DEBUG 10736 --- [http-nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T18:52:13.125+03:00 DEBUG 10736 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /login
2025-02-15T18:52:13.311+03:00 DEBUG 10736 --- [http-nio-8080-exec-3] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-02-15T18:52:13.312+03:00  INFO 10736 --- [http-nio-8080-exec-3] com.example.config.security.JWTUtils     : Generating token for user testuser
2025-02-15T18:52:13.372+03:00  INFO 10736 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T18:52:13.372+03:00  INFO 10736 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : Login successful for user: null
2025-02-15T19:11:04.271+03:00  INFO 10736 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T19:11:04.274+03:00  INFO 10736 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-02-15T19:11:04.275+03:00  INFO 10736 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-02-15T19:11:08.237+03:00  INFO 10760 --- [main] com.example.MainApp                      : Starting MainApp using Java 21.0.5 with PID 10760 (C:\Users\oleg2\IdeaProjects\security\target\classes started by oleg2 in C:\Users\oleg2\IdeaProjects\security)
2025-02-15T19:11:08.238+03:00  INFO 10760 --- [main] com.example.MainApp                      : No active profile set, falling back to 1 default profile: "default"
2025-02-15T19:11:08.910+03:00  INFO 10760 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-15T19:11:08.969+03:00  INFO 10760 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 51 ms. Found 1 JPA repository interface.
2025-02-15T19:11:09.517+03:00  INFO 10760 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-02-15T19:11:09.528+03:00  INFO 10760 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-02-15T19:11:09.529+03:00  INFO 10760 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-02-15T19:11:09.585+03:00  INFO 10760 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-02-15T19:11:09.586+03:00  INFO 10760 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1310 ms
2025-02-15T19:11:09.615+03:00  INFO 10760 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-02-15T19:11:09.787+03:00  INFO 10760 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:companydb user=SA
2025-02-15T19:11:09.788+03:00  INFO 10760 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-02-15T19:11:09.798+03:00  INFO 10760 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:companydb'
2025-02-15T19:11:09.889+03:00  INFO 10760 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-15T19:11:09.937+03:00  INFO 10760 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-02-15T19:11:09.966+03:00  INFO 10760 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-02-15T19:11:10.162+03:00  INFO 10760 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-15T19:11:10.821+03:00  INFO 10760 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-15T19:11:10.870+03:00  INFO 10760 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T19:11:11.252+03:00  WARN 10760 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-02-15T19:11:11.495+03:00  INFO 10760 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@ebbbe20, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@279e85eb, org.springframework.security.web.context.SecurityContextHolderFilter@981d9d2, org.springframework.security.web.header.HeaderWriterFilter@39a03ccc, org.springframework.web.filter.CorsFilter@4cb59398, org.springframework.security.web.authentication.logout.LogoutFilter@c770b57, com.example.config.security.LoggingFilter@5fa9971f, com.example.config.security.JwtAuthenticationFilter@2b30b627, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@423d662a, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@3314f179, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@22cf1808, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3da6950f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@42684d86, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7156f8cf, org.springframework.security.web.session.SessionManagementFilter@89178b4, org.springframework.security.web.access.ExceptionTranslationFilter@129348e8, org.springframework.security.web.access.intercept.AuthorizationFilter@188b9a1e]
2025-02-15T19:11:11.665+03:00  INFO 10760 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-02-15T19:11:11.671+03:00  INFO 10760 --- [main] com.example.MainApp                      : Started MainApp in 3.778 seconds (process running for 4.076)
2025-02-15T19:11:24.503+03:00  INFO 10760 --- [http-nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-15T19:11:24.503+03:00  INFO 10760 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-02-15T19:11:24.504+03:00  INFO 10760 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-02-15T19:11:24.517+03:00 DEBUG 10760 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /login/register
2025-02-15T19:11:24.521+03:00  INFO 10760 --- [http-nio-8080-exec-2] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T19:11:24.521+03:00  INFO 10760 --- [http-nio-8080-exec-2] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login/register
2025-02-15T19:11:24.523+03:00 DEBUG 10760 --- [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T19:11:24.524+03:00 DEBUG 10760 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /login/register
2025-02-15T19:11:24.693+03:00  INFO 10760 --- [http-nio-8080-exec-2] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T19:11:27.636+03:00 DEBUG 10760 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /login
2025-02-15T19:11:27.636+03:00  INFO 10760 --- [http-nio-8080-exec-4] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T19:11:27.637+03:00  INFO 10760 --- [http-nio-8080-exec-4] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login
2025-02-15T19:11:27.845+03:00 DEBUG 10760 --- [http-nio-8080-exec-4] o.s.s.a.dao.DaoAuthenticationProvider    : Failed to find user ''
2025-02-15T19:11:27.845+03:00  WARN 10760 --- [http-nio-8080-exec-4] e.c.s.CustomAuthenticationFailureHandler : Failed login attempt for user: null
2025-02-15T19:11:27.849+03:00 ERROR 10760 --- [http-nio-8080-exec-4] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception

org.springframework.security.core.userdetails.UsernameNotFoundException: User not found
	at com.example.service.LoginService.lambda$increaseFailsCounter$0(LoginService.java:16) ~[classes/:na]
	at java.base/java.util.Optional.orElseThrow(Optional.java:403) ~[na:na]
	at com.example.service.LoginService.increaseFailsCounter(LoginService.java:15) ~[classes/:na]
	at com.example.config.security.CustomAuthenticationFailureHandler.onAuthenticationFailure(CustomAuthenticationFailureHandler.java:26) ~[classes/:na]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.unsuccessfulAuthentication(AbstractAuthenticationProcessingFilter.java:354) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:249) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at com.example.config.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:37) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at com.example.config.security.LoggingFilter.doFilterInternal(LoggingFilter.java:27) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195) ~[spring-webmvc-6.1.5.jar:6.1.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230) ~[spring-security-config-6.2.3.jar:6.2.3]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.1.5.jar:6.1.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-02-15T19:11:27.856+03:00 DEBUG 10760 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /error
2025-02-15T19:11:27.856+03:00 DEBUG 10760 --- [http-nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T19:11:27.858+03:00 DEBUG 10760 --- [http-nio-8080-exec-4] o.s.s.web.DefaultRedirectStrategy        : Redirecting to http://localhost:8080/login
2025-02-15T19:11:27.863+03:00 DEBUG 10760 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /login
2025-02-15T19:11:27.863+03:00  INFO 10760 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : Method - GET
2025-02-15T19:11:27.863+03:00  INFO 10760 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login
2025-02-15T19:11:27.864+03:00  INFO 10760 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T19:12:39.146+03:00  INFO 10760 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T19:12:39.147+03:00  INFO 10760 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-02-15T19:12:39.148+03:00  INFO 10760 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-02-15T19:12:42.063+03:00  INFO 16876 --- [main] com.example.MainApp                      : Starting MainApp using Java 21.0.5 with PID 16876 (C:\Users\oleg2\IdeaProjects\security\target\classes started by oleg2 in C:\Users\oleg2\IdeaProjects\security)
2025-02-15T19:12:42.064+03:00  INFO 16876 --- [main] com.example.MainApp                      : No active profile set, falling back to 1 default profile: "default"
2025-02-15T19:12:42.625+03:00  INFO 16876 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-15T19:12:42.679+03:00  INFO 16876 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 47 ms. Found 1 JPA repository interface.
2025-02-15T19:12:43.171+03:00  INFO 16876 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-02-15T19:12:43.181+03:00  INFO 16876 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-02-15T19:12:43.181+03:00  INFO 16876 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-02-15T19:12:43.229+03:00  INFO 16876 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-02-15T19:12:43.229+03:00  INFO 16876 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1134 ms
2025-02-15T19:12:43.257+03:00  INFO 16876 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-02-15T19:12:43.428+03:00  INFO 16876 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:companydb user=SA
2025-02-15T19:12:43.430+03:00  INFO 16876 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-02-15T19:12:43.439+03:00  INFO 16876 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:companydb'
2025-02-15T19:12:43.553+03:00  INFO 16876 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-15T19:12:43.601+03:00  INFO 16876 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-02-15T19:12:43.633+03:00  INFO 16876 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-02-15T19:12:43.855+03:00  INFO 16876 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-15T19:12:44.523+03:00  INFO 16876 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-15T19:12:44.565+03:00  INFO 16876 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T19:12:44.942+03:00  WARN 16876 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-02-15T19:12:45.183+03:00  INFO 16876 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1b08d26f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@565030b7, org.springframework.security.web.context.SecurityContextHolderFilter@66428512, org.springframework.security.web.header.HeaderWriterFilter@16e0afab, org.springframework.web.filter.CorsFilter@752fecbf, org.springframework.security.web.authentication.logout.LogoutFilter@2fafa9bf, com.example.config.security.LoggingFilter@6c96346b, com.example.config.security.JwtAuthenticationFilter@59c00722, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@55731ccd, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@89178b4, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@2eb31735, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7a482b3a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@600b3bee, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@73753326, org.springframework.security.web.session.SessionManagementFilter@6e111aeb, org.springframework.security.web.access.ExceptionTranslationFilter@659e003e, org.springframework.security.web.access.intercept.AuthorizationFilter@308d4981]
2025-02-15T19:12:45.367+03:00  INFO 16876 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-02-15T19:12:45.374+03:00  INFO 16876 --- [main] com.example.MainApp                      : Started MainApp in 3.651 seconds (process running for 3.956)
2025-02-15T19:13:16.680+03:00  INFO 16876 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-15T19:13:16.680+03:00  INFO 16876 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-02-15T19:13:16.681+03:00  INFO 16876 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-02-15T19:13:16.697+03:00 DEBUG 16876 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /login/register
2025-02-15T19:13:16.701+03:00  INFO 16876 --- [http-nio-8080-exec-1] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T19:13:16.701+03:00  INFO 16876 --- [http-nio-8080-exec-1] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login/register
2025-02-15T19:13:16.703+03:00 DEBUG 16876 --- [http-nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T19:13:16.704+03:00 DEBUG 16876 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /login/register
2025-02-15T19:13:16.897+03:00  INFO 16876 --- [http-nio-8080-exec-1] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T19:14:20.894+03:00 DEBUG 16876 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /login
2025-02-15T19:14:20.895+03:00  INFO 16876 --- [http-nio-8080-exec-5] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T19:14:20.895+03:00  INFO 16876 --- [http-nio-8080-exec-5] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login
2025-02-15T19:14:21.107+03:00 DEBUG 16876 --- [http-nio-8080-exec-5] o.s.s.a.dao.DaoAuthenticationProvider    : Failed to find user ''
2025-02-15T19:14:21.107+03:00  WARN 16876 --- [http-nio-8080-exec-5] e.c.s.CustomAuthenticationFailureHandler : Failed login attempt for user: null
2025-02-15T19:14:21.112+03:00 ERROR 16876 --- [http-nio-8080-exec-5] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception

org.springframework.security.core.userdetails.UsernameNotFoundException: User not found
	at com.example.service.LoginService.lambda$increaseFailsCounter$0(LoginService.java:16) ~[classes/:na]
	at java.base/java.util.Optional.orElseThrow(Optional.java:403) ~[na:na]
	at com.example.service.LoginService.increaseFailsCounter(LoginService.java:15) ~[classes/:na]
	at com.example.config.security.CustomAuthenticationFailureHandler.onAuthenticationFailure(CustomAuthenticationFailureHandler.java:26) ~[classes/:na]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.unsuccessfulAuthentication(AbstractAuthenticationProcessingFilter.java:354) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:249) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at com.example.config.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:37) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at com.example.config.security.LoggingFilter.doFilterInternal(LoggingFilter.java:27) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195) ~[spring-webmvc-6.1.5.jar:6.1.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230) ~[spring-security-config-6.2.3.jar:6.2.3]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.1.5.jar:6.1.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-02-15T19:14:21.119+03:00 DEBUG 16876 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /error
2025-02-15T19:14:21.120+03:00 DEBUG 16876 --- [http-nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T19:14:21.122+03:00 DEBUG 16876 --- [http-nio-8080-exec-5] o.s.s.web.DefaultRedirectStrategy        : Redirecting to http://localhost:8080/login
2025-02-15T19:14:21.127+03:00 DEBUG 16876 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /login
2025-02-15T19:14:21.127+03:00  INFO 16876 --- [http-nio-8080-exec-6] c.example.config.security.LoggingFilter  : Method - GET
2025-02-15T19:14:21.127+03:00  INFO 16876 --- [http-nio-8080-exec-6] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login
2025-02-15T19:14:21.128+03:00  INFO 16876 --- [http-nio-8080-exec-6] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T19:15:25.169+03:00  INFO 16876 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T19:15:25.170+03:00  INFO 16876 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-02-15T19:15:25.172+03:00  INFO 16876 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-02-15T19:15:28.316+03:00  INFO 1408 --- [main] com.example.MainApp                      : Starting MainApp using Java 21.0.5 with PID 1408 (C:\Users\oleg2\IdeaProjects\security\target\classes started by oleg2 in C:\Users\oleg2\IdeaProjects\security)
2025-02-15T19:15:28.317+03:00  INFO 1408 --- [main] com.example.MainApp                      : No active profile set, falling back to 1 default profile: "default"
2025-02-15T19:15:28.895+03:00  INFO 1408 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-15T19:15:28.942+03:00  INFO 1408 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 39 ms. Found 1 JPA repository interface.
2025-02-15T19:15:29.457+03:00  INFO 1408 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-02-15T19:15:29.469+03:00  INFO 1408 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-02-15T19:15:29.470+03:00  INFO 1408 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-02-15T19:15:29.526+03:00  INFO 1408 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-02-15T19:15:29.527+03:00  INFO 1408 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1177 ms
2025-02-15T19:15:29.559+03:00  INFO 1408 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-02-15T19:15:29.730+03:00  INFO 1408 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:companydb user=SA
2025-02-15T19:15:29.732+03:00  INFO 1408 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-02-15T19:15:29.742+03:00  INFO 1408 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:companydb'
2025-02-15T19:15:29.881+03:00  INFO 1408 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-15T19:15:29.939+03:00  INFO 1408 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-02-15T19:15:29.976+03:00  INFO 1408 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-02-15T19:15:30.171+03:00  INFO 1408 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-15T19:15:30.814+03:00  INFO 1408 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-15T19:15:30.854+03:00  INFO 1408 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T19:15:31.200+03:00  WARN 1408 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-02-15T19:15:31.431+03:00  INFO 1408 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@ebbbe20, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@279e85eb, org.springframework.security.web.context.SecurityContextHolderFilter@981d9d2, org.springframework.security.web.header.HeaderWriterFilter@39a03ccc, org.springframework.web.filter.CorsFilter@4cb59398, org.springframework.security.web.authentication.logout.LogoutFilter@c770b57, com.example.config.security.LoggingFilter@5fa9971f, com.example.config.security.JwtAuthenticationFilter@2b30b627, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@423d662a, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@3314f179, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@22cf1808, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3da6950f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@42684d86, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7156f8cf, org.springframework.security.web.session.SessionManagementFilter@89178b4, org.springframework.security.web.access.ExceptionTranslationFilter@129348e8, org.springframework.security.web.access.intercept.AuthorizationFilter@188b9a1e]
2025-02-15T19:15:31.637+03:00  INFO 1408 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-02-15T19:15:31.645+03:00  INFO 1408 --- [main] com.example.MainApp                      : Started MainApp in 3.67 seconds (process running for 3.99)
2025-02-15T19:15:48.193+03:00  INFO 1408 --- [http-nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-15T19:15:48.193+03:00  INFO 1408 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-02-15T19:15:48.194+03:00  INFO 1408 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-02-15T19:15:48.206+03:00 DEBUG 1408 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /login/register
2025-02-15T19:15:48.210+03:00  INFO 1408 --- [http-nio-8080-exec-2] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T19:15:48.210+03:00  INFO 1408 --- [http-nio-8080-exec-2] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login/register
2025-02-15T19:15:48.211+03:00 DEBUG 1408 --- [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T19:15:48.212+03:00 DEBUG 1408 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /login/register
2025-02-15T19:15:48.379+03:00  INFO 1408 --- [http-nio-8080-exec-2] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T19:15:50.538+03:00 DEBUG 1408 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /login
2025-02-15T19:15:50.539+03:00  INFO 1408 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T19:15:50.539+03:00  INFO 1408 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login
2025-02-15T19:15:50.756+03:00 DEBUG 1408 --- [http-nio-8080-exec-3] o.s.s.a.dao.DaoAuthenticationProvider    : Failed to find user ''
2025-02-15T19:15:50.757+03:00  INFO 1408 --- [http-nio-8080-exec-3] e.c.s.CustomAuthenticationFailureHandler : USERNAME null
2025-02-15T19:15:50.757+03:00  WARN 1408 --- [http-nio-8080-exec-3] e.c.s.CustomAuthenticationFailureHandler : Failed login attempt for user: null
2025-02-15T19:15:50.761+03:00 ERROR 1408 --- [http-nio-8080-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception

org.springframework.security.core.userdetails.UsernameNotFoundException: User not found
	at com.example.service.LoginService.lambda$increaseFailsCounter$0(LoginService.java:16) ~[classes/:na]
	at java.base/java.util.Optional.orElseThrow(Optional.java:403) ~[na:na]
	at com.example.service.LoginService.increaseFailsCounter(LoginService.java:15) ~[classes/:na]
	at com.example.config.security.CustomAuthenticationFailureHandler.onAuthenticationFailure(CustomAuthenticationFailureHandler.java:27) ~[classes/:na]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.unsuccessfulAuthentication(AbstractAuthenticationProcessingFilter.java:354) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:249) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at com.example.config.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:37) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at com.example.config.security.LoggingFilter.doFilterInternal(LoggingFilter.java:27) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195) ~[spring-webmvc-6.1.5.jar:6.1.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230) ~[spring-security-config-6.2.3.jar:6.2.3]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.1.5.jar:6.1.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-02-15T19:15:50.769+03:00 DEBUG 1408 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /error
2025-02-15T19:15:50.769+03:00 DEBUG 1408 --- [http-nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T19:15:50.771+03:00 DEBUG 1408 --- [http-nio-8080-exec-3] o.s.s.web.DefaultRedirectStrategy        : Redirecting to http://localhost:8080/login
2025-02-15T19:15:50.775+03:00 DEBUG 1408 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /login
2025-02-15T19:15:50.775+03:00  INFO 1408 --- [http-nio-8080-exec-4] c.example.config.security.LoggingFilter  : Method - GET
2025-02-15T19:15:50.775+03:00  INFO 1408 --- [http-nio-8080-exec-4] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login
2025-02-15T19:15:50.776+03:00  INFO 1408 --- [http-nio-8080-exec-4] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T19:19:40.627+03:00  INFO 1408 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T19:19:40.629+03:00  INFO 1408 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-02-15T19:19:40.631+03:00  INFO 1408 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-02-15T19:19:43.577+03:00  INFO 4984 --- [main] com.example.MainApp                      : Starting MainApp using Java 21.0.5 with PID 4984 (C:\Users\oleg2\IdeaProjects\security\target\classes started by oleg2 in C:\Users\oleg2\IdeaProjects\security)
2025-02-15T19:19:43.578+03:00  INFO 4984 --- [main] com.example.MainApp                      : No active profile set, falling back to 1 default profile: "default"
2025-02-15T19:19:44.133+03:00  INFO 4984 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-15T19:19:44.182+03:00  INFO 4984 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 43 ms. Found 1 JPA repository interface.
2025-02-15T19:19:44.661+03:00  INFO 4984 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-02-15T19:19:44.671+03:00  INFO 4984 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-02-15T19:19:44.672+03:00  INFO 4984 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-02-15T19:19:44.722+03:00  INFO 4984 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-02-15T19:19:44.723+03:00  INFO 4984 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1114 ms
2025-02-15T19:19:44.751+03:00  INFO 4984 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-02-15T19:19:44.914+03:00  INFO 4984 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:companydb user=SA
2025-02-15T19:19:44.916+03:00  INFO 4984 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-02-15T19:19:44.924+03:00  INFO 4984 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:companydb'
2025-02-15T19:19:45.025+03:00  INFO 4984 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-15T19:19:45.070+03:00  INFO 4984 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-02-15T19:19:45.100+03:00  INFO 4984 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-02-15T19:19:45.295+03:00  INFO 4984 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-15T19:19:45.953+03:00  INFO 4984 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-15T19:19:45.992+03:00  INFO 4984 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T19:19:46.346+03:00  WARN 4984 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-02-15T19:19:46.567+03:00  INFO 4984 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@423d662a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5d56c2d2, org.springframework.security.web.context.SecurityContextHolderFilter@89178b4, org.springframework.security.web.header.HeaderWriterFilter@600b3bee, org.springframework.web.filter.CorsFilter@4a249610, org.springframework.security.web.authentication.logout.LogoutFilter@7fa86ddd, com.example.config.security.LoggingFilter@70a24463, com.example.config.security.JwtAuthenticationFilter@5fa9971f, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@24f77077, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@7d6a9d5e, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@ebbbe20, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@64836643, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@981d9d2, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@279e85eb, org.springframework.security.web.session.SessionManagementFilter@20ad64c, org.springframework.security.web.access.ExceptionTranslationFilter@e21d73, org.springframework.security.web.access.intercept.AuthorizationFilter@73753326]
2025-02-15T19:19:46.738+03:00  INFO 4984 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-02-15T19:19:46.745+03:00  INFO 4984 --- [main] com.example.MainApp                      : Started MainApp in 3.497 seconds (process running for 3.803)
2025-02-15T19:19:52.805+03:00  INFO 4984 --- [http-nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-15T19:19:52.805+03:00  INFO 4984 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-02-15T19:19:52.806+03:00  INFO 4984 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-02-15T19:19:52.821+03:00 DEBUG 4984 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /login/register
2025-02-15T19:19:52.825+03:00  INFO 4984 --- [http-nio-8080-exec-2] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T19:19:52.826+03:00  INFO 4984 --- [http-nio-8080-exec-2] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login/register
2025-02-15T19:19:52.827+03:00 DEBUG 4984 --- [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T19:19:52.828+03:00 DEBUG 4984 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /login/register
2025-02-15T19:19:53.003+03:00  INFO 4984 --- [http-nio-8080-exec-2] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T19:20:02.952+03:00 DEBUG 4984 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /login
2025-02-15T19:20:02.953+03:00  INFO 4984 --- [http-nio-8080-exec-4] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T19:20:02.953+03:00  INFO 4984 --- [http-nio-8080-exec-4] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login
2025-02-15T19:20:03.171+03:00 DEBUG 4984 --- [http-nio-8080-exec-4] o.s.s.a.dao.DaoAuthenticationProvider    : Failed to find user ''
2025-02-15T19:20:03.171+03:00 ERROR 4984 --- [http-nio-8080-exec-4] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception

java.lang.NullPointerException: Cannot invoke "java.security.Principal.getName()" because the return value of "jakarta.servlet.http.HttpServletRequest.getUserPrincipal()" is null
	at com.example.config.security.CustomAuthenticationFailureHandler.onAuthenticationFailure(CustomAuthenticationFailureHandler.java:24) ~[classes/:na]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.unsuccessfulAuthentication(AbstractAuthenticationProcessingFilter.java:354) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:249) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at com.example.config.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:37) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at com.example.config.security.LoggingFilter.doFilterInternal(LoggingFilter.java:27) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.2.3.jar:6.2.3]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195) ~[spring-webmvc-6.1.5.jar:6.1.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230) ~[spring-security-config-6.2.3.jar:6.2.3]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.1.5.jar:6.1.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.1.5.jar:6.1.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.5.jar:6.1.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.19.jar:10.1.19]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-02-15T19:20:03.178+03:00 DEBUG 4984 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /error
2025-02-15T19:20:03.179+03:00 DEBUG 4984 --- [http-nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T19:20:03.181+03:00 DEBUG 4984 --- [http-nio-8080-exec-4] o.s.s.web.DefaultRedirectStrategy        : Redirecting to http://localhost:8080/login
2025-02-15T19:20:03.186+03:00 DEBUG 4984 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /login
2025-02-15T19:20:03.186+03:00  INFO 4984 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : Method - GET
2025-02-15T19:20:03.186+03:00  INFO 4984 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login
2025-02-15T19:20:03.187+03:00  INFO 4984 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T19:27:23.500+03:00  INFO 4984 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T19:27:23.502+03:00  INFO 4984 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-02-15T19:27:23.503+03:00  INFO 4984 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-02-15T19:27:26.535+03:00  INFO 11060 --- [main] com.example.MainApp                      : Starting MainApp using Java 21.0.5 with PID 11060 (C:\Users\oleg2\IdeaProjects\security\target\classes started by oleg2 in C:\Users\oleg2\IdeaProjects\security)
2025-02-15T19:27:26.536+03:00  INFO 11060 --- [main] com.example.MainApp                      : No active profile set, falling back to 1 default profile: "default"
2025-02-15T19:27:27.095+03:00  INFO 11060 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-15T19:27:27.143+03:00  INFO 11060 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 42 ms. Found 1 JPA repository interface.
2025-02-15T19:27:27.622+03:00  INFO 11060 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-02-15T19:27:27.633+03:00  INFO 11060 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-02-15T19:27:27.633+03:00  INFO 11060 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-02-15T19:27:27.684+03:00  INFO 11060 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-02-15T19:27:27.685+03:00  INFO 11060 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1115 ms
2025-02-15T19:27:27.711+03:00  INFO 11060 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-02-15T19:27:27.875+03:00  INFO 11060 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:companydb user=SA
2025-02-15T19:27:27.877+03:00  INFO 11060 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-02-15T19:27:27.887+03:00  INFO 11060 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:companydb'
2025-02-15T19:27:27.976+03:00  INFO 11060 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-15T19:27:28.023+03:00  INFO 11060 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-02-15T19:27:28.053+03:00  INFO 11060 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-02-15T19:27:28.251+03:00  INFO 11060 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-15T19:27:28.904+03:00  INFO 11060 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-15T19:27:28.943+03:00  INFO 11060 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T19:27:29.341+03:00  WARN 11060 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-02-15T19:27:29.539+03:00  INFO 11060 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@28f6a008, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@71dfca65, org.springframework.security.web.context.SecurityContextHolderFilter@66cb9a63, org.springframework.security.web.header.HeaderWriterFilter@73839f22, org.springframework.web.filter.CorsFilter@7fa86ddd, org.springframework.security.web.authentication.logout.LogoutFilter@74ed7111, com.example.config.security.LoggingFilter@514f2020, com.example.config.security.JwtAuthenticationFilter@558ed473, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@260fffec, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@55a5eea3, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@1e9f6095, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2319c1e0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@659e003e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3f465ae, org.springframework.security.web.session.SessionManagementFilter@7cc7e441, org.springframework.security.web.access.ExceptionTranslationFilter@63d14dbf, org.springframework.security.web.access.intercept.AuthorizationFilter@43c3354]
2025-02-15T19:27:29.721+03:00  INFO 11060 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-02-15T19:27:29.728+03:00  INFO 11060 --- [main] com.example.MainApp                      : Started MainApp in 3.518 seconds (process running for 3.832)
2025-02-15T19:27:35.165+03:00  INFO 11060 --- [http-nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-15T19:27:35.165+03:00  INFO 11060 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-02-15T19:27:35.166+03:00  INFO 11060 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-02-15T19:27:35.178+03:00 DEBUG 11060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /login/register
2025-02-15T19:27:35.183+03:00  INFO 11060 --- [http-nio-8080-exec-2] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T19:27:35.183+03:00  INFO 11060 --- [http-nio-8080-exec-2] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login/register
2025-02-15T19:27:35.184+03:00 DEBUG 11060 --- [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T19:27:35.185+03:00 DEBUG 11060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /login/register
2025-02-15T19:27:35.361+03:00  INFO 11060 --- [http-nio-8080-exec-2] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T19:27:40.438+03:00 DEBUG 11060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /login
2025-02-15T19:27:40.438+03:00  INFO 11060 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T19:27:40.439+03:00  INFO 11060 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login
2025-02-15T19:27:40.657+03:00 DEBUG 11060 --- [http-nio-8080-exec-3] o.s.s.a.dao.DaoAuthenticationProvider    : Failed to find user ''
2025-02-15T19:27:40.665+03:00  INFO 11060 --- [http-nio-8080-exec-3] e.c.s.CustomAuthenticationFailureHandler : USERNAME testuser
2025-02-15T19:27:40.665+03:00  WARN 11060 --- [http-nio-8080-exec-3] e.c.s.CustomAuthenticationFailureHandler : Failed login attempt for user: testuser
2025-02-15T19:27:40.684+03:00  INFO 11060 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : Response status - 401
2025-02-15T19:27:40.684+03:00  WARN 11060 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : Login failed for user: null
2025-02-15T19:27:40.688+03:00 DEBUG 11060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /error
2025-02-15T19:27:40.688+03:00 DEBUG 11060 --- [http-nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T19:27:40.689+03:00 DEBUG 11060 --- [http-nio-8080-exec-3] o.s.s.web.DefaultRedirectStrategy        : Redirecting to http://localhost:8080/login
2025-02-15T19:27:40.694+03:00 DEBUG 11060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /login
2025-02-15T19:27:40.694+03:00  INFO 11060 --- [http-nio-8080-exec-4] c.example.config.security.LoggingFilter  : Method - GET
2025-02-15T19:27:40.694+03:00  INFO 11060 --- [http-nio-8080-exec-4] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login
2025-02-15T19:27:40.695+03:00  INFO 11060 --- [http-nio-8080-exec-4] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T19:29:03.975+03:00  INFO 11060 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T19:29:03.976+03:00  INFO 11060 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-02-15T19:29:03.978+03:00  INFO 11060 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-02-15T19:29:07.039+03:00  INFO 5920 --- [main] com.example.MainApp                      : Starting MainApp using Java 21.0.5 with PID 5920 (C:\Users\oleg2\IdeaProjects\security\target\classes started by oleg2 in C:\Users\oleg2\IdeaProjects\security)
2025-02-15T19:29:07.041+03:00  INFO 5920 --- [main] com.example.MainApp                      : No active profile set, falling back to 1 default profile: "default"
2025-02-15T19:29:07.591+03:00  INFO 5920 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-15T19:29:07.642+03:00  INFO 5920 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 45 ms. Found 1 JPA repository interface.
2025-02-15T19:29:08.142+03:00  INFO 5920 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-02-15T19:29:08.152+03:00  INFO 5920 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-02-15T19:29:08.153+03:00  INFO 5920 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-02-15T19:29:08.208+03:00  INFO 5920 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-02-15T19:29:08.209+03:00  INFO 5920 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1135 ms
2025-02-15T19:29:08.238+03:00  INFO 5920 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-02-15T19:29:08.406+03:00  INFO 5920 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:companydb user=SA
2025-02-15T19:29:08.408+03:00  INFO 5920 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-02-15T19:29:08.417+03:00  INFO 5920 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:companydb'
2025-02-15T19:29:08.513+03:00  INFO 5920 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-15T19:29:08.565+03:00  INFO 5920 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-02-15T19:29:08.594+03:00  INFO 5920 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-02-15T19:29:08.788+03:00  INFO 5920 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-15T19:29:09.440+03:00  INFO 5920 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-15T19:29:09.481+03:00  INFO 5920 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T19:29:09.899+03:00  WARN 5920 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-02-15T19:29:10.099+03:00  INFO 5920 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5d56c2d2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4a249610, org.springframework.security.web.context.SecurityContextHolderFilter@5c7d675c, org.springframework.security.web.header.HeaderWriterFilter@129348e8, org.springframework.web.filter.CorsFilter@ebbbe20, org.springframework.security.web.authentication.logout.LogoutFilter@1e9f6095, com.example.config.security.LoggingFilter@1bd6638, com.example.config.security.JwtAuthenticationFilter@589d831e, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@2eb73a42, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@74ed7111, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@279e85eb, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@981d9d2, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@ad6448e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4cb59398, org.springframework.security.web.session.SessionManagementFilter@39a03ccc, org.springframework.security.web.access.ExceptionTranslationFilter@7a482b3a, org.springframework.security.web.access.intercept.AuthorizationFilter@24f77077]
2025-02-15T19:29:10.292+03:00  INFO 5920 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-02-15T19:29:10.298+03:00  INFO 5920 --- [main] com.example.MainApp                      : Started MainApp in 3.577 seconds (process running for 3.872)
2025-02-15T19:29:14.267+03:00  INFO 5920 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-15T19:29:14.268+03:00  INFO 5920 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-02-15T19:29:14.269+03:00  INFO 5920 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-02-15T19:29:14.285+03:00 DEBUG 5920 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /login/register
2025-02-15T19:29:14.290+03:00  INFO 5920 --- [http-nio-8080-exec-1] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T19:29:14.290+03:00  INFO 5920 --- [http-nio-8080-exec-1] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login/register
2025-02-15T19:29:14.292+03:00 DEBUG 5920 --- [http-nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T19:29:14.293+03:00 DEBUG 5920 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /login/register
2025-02-15T19:29:14.465+03:00  INFO 5920 --- [http-nio-8080-exec-1] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T19:29:16.108+03:00 DEBUG 5920 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /login
2025-02-15T19:29:16.109+03:00  INFO 5920 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T19:29:16.109+03:00  INFO 5920 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login
2025-02-15T19:29:16.318+03:00 DEBUG 5920 --- [http-nio-8080-exec-3] o.s.s.a.dao.DaoAuthenticationProvider    : Failed to find user ''
2025-02-15T19:29:16.326+03:00  INFO 5920 --- [http-nio-8080-exec-3] e.c.s.CustomAuthenticationFailureHandler : USERNAME testuser
2025-02-15T19:29:16.326+03:00  WARN 5920 --- [http-nio-8080-exec-3] e.c.s.CustomAuthenticationFailureHandler : Failed login attempt for user: testuser
2025-02-15T19:29:16.346+03:00  INFO 5920 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : Response status - 401
2025-02-15T19:29:16.346+03:00  WARN 5920 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : Login failed
2025-02-15T19:29:16.350+03:00 DEBUG 5920 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /error
2025-02-15T19:29:16.350+03:00 DEBUG 5920 --- [http-nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T19:29:16.352+03:00 DEBUG 5920 --- [http-nio-8080-exec-3] o.s.s.web.DefaultRedirectStrategy        : Redirecting to http://localhost:8080/login
2025-02-15T19:29:16.356+03:00 DEBUG 5920 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /login
2025-02-15T19:29:16.356+03:00  INFO 5920 --- [http-nio-8080-exec-4] c.example.config.security.LoggingFilter  : Method - GET
2025-02-15T19:29:16.357+03:00  INFO 5920 --- [http-nio-8080-exec-4] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login
2025-02-15T19:29:16.358+03:00  INFO 5920 --- [http-nio-8080-exec-4] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T19:30:58.519+03:00  INFO 5920 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T19:30:58.521+03:00  INFO 5920 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-02-15T19:30:58.523+03:00  INFO 5920 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-02-15T19:31:01.886+03:00  INFO 8544 --- [main] com.example.MainApp                      : Starting MainApp using Java 21.0.5 with PID 8544 (C:\Users\oleg2\IdeaProjects\security\target\classes started by oleg2 in C:\Users\oleg2\IdeaProjects\security)
2025-02-15T19:31:01.888+03:00  INFO 8544 --- [main] com.example.MainApp                      : No active profile set, falling back to 1 default profile: "default"
2025-02-15T19:31:02.459+03:00  INFO 8544 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-15T19:31:02.509+03:00  INFO 8544 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 41 ms. Found 1 JPA repository interface.
2025-02-15T19:31:02.985+03:00  INFO 8544 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-02-15T19:31:02.995+03:00  INFO 8544 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-02-15T19:31:02.995+03:00  INFO 8544 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-02-15T19:31:03.045+03:00  INFO 8544 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-02-15T19:31:03.045+03:00  INFO 8544 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1124 ms
2025-02-15T19:31:03.070+03:00  INFO 8544 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-02-15T19:31:03.240+03:00  INFO 8544 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:companydb user=SA
2025-02-15T19:31:03.241+03:00  INFO 8544 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-02-15T19:31:03.250+03:00  INFO 8544 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:companydb'
2025-02-15T19:31:03.341+03:00  INFO 8544 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-15T19:31:03.391+03:00  INFO 8544 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-02-15T19:31:03.419+03:00  INFO 8544 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-02-15T19:31:03.608+03:00  INFO 8544 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-15T19:31:04.274+03:00  INFO 8544 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-15T19:31:04.313+03:00  INFO 8544 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T19:31:04.701+03:00  WARN 8544 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-02-15T19:31:04.905+03:00  INFO 8544 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@35a2ea5a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@18ab513d, org.springframework.security.web.context.SecurityContextHolderFilter@7d836c4a, org.springframework.security.web.header.HeaderWriterFilter@7d12fb85, org.springframework.web.filter.CorsFilter@5e8a678a, org.springframework.security.web.authentication.logout.LogoutFilter@4d529bc0, com.example.config.security.LoggingFilter@52ba21e4, com.example.config.security.JwtAuthenticationFilter@4a36a35d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6d77d269, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@350d9d23, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6fe91918, org.springframework.security.web.session.SessionManagementFilter@6f9b5f01, org.springframework.security.web.access.ExceptionTranslationFilter@12948e7a, org.springframework.security.web.access.intercept.AuthorizationFilter@5b6ec94a]
2025-02-15T19:31:05.095+03:00  INFO 8544 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-02-15T19:31:05.100+03:00  INFO 8544 --- [main] com.example.MainApp                      : Started MainApp in 3.537 seconds (process running for 3.861)
2025-02-15T19:31:09.710+03:00  INFO 8544 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-15T19:31:09.710+03:00  INFO 8544 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-02-15T19:31:09.711+03:00  INFO 8544 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-02-15T19:31:09.726+03:00 DEBUG 8544 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /login/register
2025-02-15T19:31:09.731+03:00  INFO 8544 --- [http-nio-8080-exec-1] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T19:31:09.731+03:00  INFO 8544 --- [http-nio-8080-exec-1] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login/register
2025-02-15T19:31:09.732+03:00 DEBUG 8544 --- [http-nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T19:31:09.733+03:00 DEBUG 8544 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /login/register
2025-02-15T19:31:09.918+03:00  INFO 8544 --- [http-nio-8080-exec-1] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T19:31:11.573+03:00 DEBUG 8544 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /login
2025-02-15T19:31:11.574+03:00  INFO 8544 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T19:31:11.574+03:00  INFO 8544 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login
2025-02-15T19:31:11.574+03:00 DEBUG 8544 --- [http-nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T19:31:11.575+03:00 DEBUG 8544 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /login
2025-02-15T19:31:11.782+03:00 DEBUG 8544 --- [http-nio-8080-exec-3] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-02-15T19:31:11.782+03:00  INFO 8544 --- [http-nio-8080-exec-3] com.example.config.security.JWTUtils     : Generating token for user testuser
2025-02-15T19:31:11.844+03:00  INFO 8544 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T19:31:11.845+03:00  INFO 8544 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : Login successful
2025-02-15T19:31:43.793+03:00  INFO 8544 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T19:31:43.794+03:00  INFO 8544 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-02-15T19:31:43.796+03:00  INFO 8544 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-02-15T19:31:47.116+03:00  INFO 17212 --- [main] com.example.MainApp                      : Starting MainApp using Java 21.0.5 with PID 17212 (C:\Users\oleg2\IdeaProjects\security\target\classes started by oleg2 in C:\Users\oleg2\IdeaProjects\security)
2025-02-15T19:31:47.118+03:00  INFO 17212 --- [main] com.example.MainApp                      : No active profile set, falling back to 1 default profile: "default"
2025-02-15T19:31:47.678+03:00  INFO 17212 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-15T19:31:47.725+03:00  INFO 17212 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 40 ms. Found 1 JPA repository interface.
2025-02-15T19:31:48.213+03:00  INFO 17212 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-02-15T19:31:48.224+03:00  INFO 17212 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-02-15T19:31:48.224+03:00  INFO 17212 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-02-15T19:31:48.275+03:00  INFO 17212 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-02-15T19:31:48.275+03:00  INFO 17212 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1126 ms
2025-02-15T19:31:48.303+03:00  INFO 17212 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-02-15T19:31:48.474+03:00  INFO 17212 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:companydb user=SA
2025-02-15T19:31:48.476+03:00  INFO 17212 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-02-15T19:31:48.485+03:00  INFO 17212 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:companydb'
2025-02-15T19:31:48.588+03:00  INFO 17212 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-15T19:31:48.634+03:00  INFO 17212 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-02-15T19:31:48.665+03:00  INFO 17212 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-02-15T19:31:48.862+03:00  INFO 17212 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-15T19:31:49.526+03:00  INFO 17212 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-15T19:31:49.573+03:00  INFO 17212 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T19:31:49.964+03:00  WARN 17212 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-02-15T19:31:50.186+03:00  INFO 17212 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@22cf1808, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7156f8cf, org.springframework.security.web.context.SecurityContextHolderFilter@42684d86, org.springframework.security.web.header.HeaderWriterFilter@5c7d675c, org.springframework.web.filter.CorsFilter@22349ad3, org.springframework.security.web.authentication.logout.LogoutFilter@750adad8, com.example.config.security.LoggingFilter@370a935f, com.example.config.security.JwtAuthenticationFilter@556944cd, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@ebbbe20, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@39a1e1e6, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@42fdf45e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7d6a9d5e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@74ed7111, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1828ab51, org.springframework.security.web.session.SessionManagementFilter@981d9d2, org.springframework.security.web.access.ExceptionTranslationFilter@4db45d, org.springframework.security.web.access.intercept.AuthorizationFilter@4a249610]
2025-02-15T19:31:50.383+03:00  INFO 17212 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-02-15T19:31:50.389+03:00  INFO 17212 --- [main] com.example.MainApp                      : Started MainApp in 3.594 seconds (process running for 3.887)
2025-02-15T19:31:54.912+03:00  INFO 17212 --- [http-nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-15T19:31:54.912+03:00  INFO 17212 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-02-15T19:31:54.913+03:00  INFO 17212 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-02-15T19:31:54.925+03:00 DEBUG 17212 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /login/register
2025-02-15T19:31:54.929+03:00  INFO 17212 --- [http-nio-8080-exec-2] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T19:31:54.930+03:00  INFO 17212 --- [http-nio-8080-exec-2] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login/register
2025-02-15T19:31:54.931+03:00 DEBUG 17212 --- [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T19:31:54.932+03:00 DEBUG 17212 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /login/register
2025-02-15T19:31:55.105+03:00  INFO 17212 --- [http-nio-8080-exec-2] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T19:31:57.116+03:00 DEBUG 17212 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /login
2025-02-15T19:31:57.116+03:00  INFO 17212 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T19:31:57.116+03:00  INFO 17212 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login
2025-02-15T19:31:57.321+03:00 DEBUG 17212 --- [http-nio-8080-exec-3] o.s.s.a.dao.DaoAuthenticationProvider    : Failed to find user ''
2025-02-15T19:31:57.329+03:00  INFO 17212 --- [http-nio-8080-exec-3] e.c.s.CustomAuthenticationFailureHandler : USERNAME testuser
2025-02-15T19:31:57.329+03:00  WARN 17212 --- [http-nio-8080-exec-3] e.c.s.CustomAuthenticationFailureHandler : Failed login attempt for user: testuser
2025-02-15T19:31:57.350+03:00  INFO 17212 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : Response status - 401
2025-02-15T19:31:57.350+03:00  WARN 17212 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : Login failed
2025-02-15T19:31:57.356+03:00 DEBUG 17212 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /error
2025-02-15T19:31:57.356+03:00 DEBUG 17212 --- [http-nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T19:31:57.357+03:00 DEBUG 17212 --- [http-nio-8080-exec-3] o.s.s.web.DefaultRedirectStrategy        : Redirecting to http://localhost:8080/login
2025-02-15T19:31:57.363+03:00 DEBUG 17212 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /login
2025-02-15T19:31:57.363+03:00  INFO 17212 --- [http-nio-8080-exec-4] c.example.config.security.LoggingFilter  : Method - GET
2025-02-15T19:31:57.363+03:00  INFO 17212 --- [http-nio-8080-exec-4] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login
2025-02-15T19:31:57.364+03:00  INFO 17212 --- [http-nio-8080-exec-4] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T19:43:36.832+03:00  INFO 17212 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T19:43:36.833+03:00  INFO 17212 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-02-15T19:43:36.835+03:00  INFO 17212 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-02-15T19:43:40.100+03:00  INFO 11132 --- [main] com.example.MainApp                      : Starting MainApp using Java 21.0.5 with PID 11132 (C:\Users\oleg2\IdeaProjects\security\target\classes started by oleg2 in C:\Users\oleg2\IdeaProjects\security)
2025-02-15T19:43:40.102+03:00  INFO 11132 --- [main] com.example.MainApp                      : No active profile set, falling back to 1 default profile: "default"
2025-02-15T19:43:40.661+03:00  INFO 11132 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-15T19:43:40.705+03:00  INFO 11132 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 38 ms. Found 1 JPA repository interface.
2025-02-15T19:43:41.234+03:00  INFO 11132 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-02-15T19:43:41.243+03:00  INFO 11132 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-02-15T19:43:41.243+03:00  INFO 11132 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-02-15T19:43:41.294+03:00  INFO 11132 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-02-15T19:43:41.294+03:00  INFO 11132 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1160 ms
2025-02-15T19:43:41.325+03:00  INFO 11132 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-02-15T19:43:41.497+03:00  INFO 11132 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:companydb user=SA
2025-02-15T19:43:41.498+03:00  INFO 11132 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-02-15T19:43:41.507+03:00  INFO 11132 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:companydb'
2025-02-15T19:43:41.613+03:00  INFO 11132 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-15T19:43:41.664+03:00  INFO 11132 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-02-15T19:43:41.694+03:00  INFO 11132 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-02-15T19:43:41.897+03:00  INFO 11132 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-15T19:43:42.640+03:00  INFO 11132 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-15T19:43:42.681+03:00  INFO 11132 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T19:43:43.085+03:00  WARN 11132 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-02-15T19:43:43.274+03:00  INFO 11132 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@256d8f17, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2319c1e0, org.springframework.security.web.context.SecurityContextHolderFilter@9771c71, org.springframework.security.web.header.HeaderWriterFilter@6859bbd4, org.springframework.web.filter.CorsFilter@659e003e, org.springframework.security.web.authentication.logout.LogoutFilter@5e8a678a, com.example.config.security.LoggingFilter@26c2f767, com.example.config.security.JwtAuthenticationFilter@e2498a3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@8cce9ad, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6dc5e857, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5f3c866c, org.springframework.security.web.session.SessionManagementFilter@6ba02f70, org.springframework.security.web.access.ExceptionTranslationFilter@684bfba9, org.springframework.security.web.access.intercept.AuthorizationFilter@bb1b872]
2025-02-15T19:43:43.472+03:00  INFO 11132 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-02-15T19:43:43.478+03:00  INFO 11132 --- [main] com.example.MainApp                      : Started MainApp in 3.709 seconds (process running for 4.008)
2025-02-15T19:43:48.931+03:00  INFO 11132 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-15T19:43:48.932+03:00  INFO 11132 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-02-15T19:43:48.933+03:00  INFO 11132 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-02-15T19:43:48.948+03:00 DEBUG 11132 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /login/register
2025-02-15T19:43:48.953+03:00  INFO 11132 --- [http-nio-8080-exec-1] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T19:43:48.953+03:00  INFO 11132 --- [http-nio-8080-exec-1] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login/register
2025-02-15T19:43:48.955+03:00 DEBUG 11132 --- [http-nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T19:43:48.956+03:00 DEBUG 11132 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /login/register
2025-02-15T19:43:49.152+03:00  INFO 11132 --- [http-nio-8080-exec-1] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T19:43:51.557+03:00 DEBUG 11132 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /login
2025-02-15T19:43:51.557+03:00  INFO 11132 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T19:43:51.557+03:00  INFO 11132 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login
2025-02-15T19:43:51.558+03:00 DEBUG 11132 --- [http-nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T19:43:51.558+03:00 DEBUG 11132 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /login
2025-02-15T19:43:51.746+03:00 DEBUG 11132 --- [http-nio-8080-exec-3] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-02-15T19:43:51.746+03:00  INFO 11132 --- [http-nio-8080-exec-3] com.example.config.security.JWTUtils     : Generating token for user testuser
2025-02-15T19:43:51.811+03:00  INFO 11132 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T19:43:51.811+03:00  INFO 11132 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : Login successful
2025-02-15T19:44:06.532+03:00 DEBUG 11132 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /user/profile
2025-02-15T19:44:06.532+03:00  INFO 11132 --- [http-nio-8080-exec-4] c.example.config.security.LoggingFilter  : Method - GET
2025-02-15T19:44:06.532+03:00  INFO 11132 --- [http-nio-8080-exec-4] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/user/profile
2025-02-15T19:44:06.588+03:00 DEBUG 11132 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /user/profile
2025-02-15T19:44:06.590+03:00 DEBUG 11132 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.getProfile(); target is of class [com.example.controller.UserController]
2025-02-15T19:44:06.616+03:00 DEBUG 11132 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.getProfile(); target is of class [com.example.controller.UserController]
2025-02-15T19:44:06.618+03:00  INFO 11132 --- [http-nio-8080-exec-4] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T19:44:34.644+03:00 DEBUG 11132 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /user/moderate
2025-02-15T19:44:34.644+03:00  INFO 11132 --- [http-nio-8080-exec-5] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T19:44:34.644+03:00  INFO 11132 --- [http-nio-8080-exec-5] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/user/moderate
2025-02-15T19:44:34.647+03:00 DEBUG 11132 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /user/moderate
2025-02-15T19:44:34.648+03:00 DEBUG 11132 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.moderateContent(); target is of class [com.example.controller.UserController]
2025-02-15T19:44:34.652+03:00 DEBUG 11132 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.moderateContent(); target is of class [com.example.controller.UserController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@66b98eb9 and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('MODERATOR') or hasRole('SUPER_ADMIN')]
2025-02-15T19:44:34.653+03:00 DEBUG 11132 --- [http-nio-8080-exec-5] o.s.s.w.access.AccessDeniedHandlerImpl   : Responding with 403 status code
2025-02-15T19:44:34.654+03:00  INFO 11132 --- [http-nio-8080-exec-5] c.example.config.security.LoggingFilter  : Response status - 403
2025-02-15T19:44:34.659+03:00 DEBUG 11132 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /error
2025-02-15T19:44:34.659+03:00 DEBUG 11132 --- [http-nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T19:44:34.659+03:00 DEBUG 11132 --- [http-nio-8080-exec-5] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-02-15T19:46:15.106+03:00  INFO 11132 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T19:46:15.108+03:00  INFO 11132 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-02-15T19:46:15.109+03:00  INFO 11132 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-02-15T19:46:18.365+03:00  INFO 9740 --- [main] com.example.MainApp                      : Starting MainApp using Java 21.0.5 with PID 9740 (C:\Users\oleg2\IdeaProjects\security\target\classes started by oleg2 in C:\Users\oleg2\IdeaProjects\security)
2025-02-15T19:46:18.367+03:00  INFO 9740 --- [main] com.example.MainApp                      : No active profile set, falling back to 1 default profile: "default"
2025-02-15T19:46:18.943+03:00  INFO 9740 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-15T19:46:18.992+03:00  INFO 9740 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 41 ms. Found 1 JPA repository interface.
2025-02-15T19:46:19.517+03:00  INFO 9740 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-02-15T19:46:19.528+03:00  INFO 9740 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-02-15T19:46:19.529+03:00  INFO 9740 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-02-15T19:46:19.584+03:00  INFO 9740 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-02-15T19:46:19.584+03:00  INFO 9740 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1185 ms
2025-02-15T19:46:19.614+03:00  INFO 9740 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-02-15T19:46:19.792+03:00  INFO 9740 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:companydb user=SA
2025-02-15T19:46:19.793+03:00  INFO 9740 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-02-15T19:46:19.803+03:00  INFO 9740 --- [main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:companydb'
2025-02-15T19:46:19.902+03:00  INFO 9740 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-15T19:46:19.951+03:00  INFO 9740 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.4.4.Final
2025-02-15T19:46:19.980+03:00  INFO 9740 --- [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-02-15T19:46:20.184+03:00  INFO 9740 --- [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-15T19:46:20.873+03:00  INFO 9740 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-15T19:46:20.914+03:00  INFO 9740 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T19:46:21.309+03:00  WARN 9740 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-02-15T19:46:21.502+03:00  INFO 9740 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7a482b3a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@600b3bee, org.springframework.security.web.context.SecurityContextHolderFilter@4afdb05e, org.springframework.security.web.header.HeaderWriterFilter@b1f36e5, org.springframework.web.filter.CorsFilter@129348e8, org.springframework.security.web.authentication.logout.LogoutFilter@7cc7e441, com.example.config.security.LoggingFilter@4fd00e10, com.example.config.security.JwtAuthenticationFilter@5c552f08, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7f9b851c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6a8ab98f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@20ad64c, org.springframework.security.web.session.SessionManagementFilter@7a023e34, org.springframework.security.web.access.ExceptionTranslationFilter@3b8a063d, org.springframework.security.web.access.intercept.AuthorizationFilter@46ab8e4b]
2025-02-15T19:46:21.703+03:00  INFO 9740 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-02-15T19:46:21.710+03:00  INFO 9740 --- [main] com.example.MainApp                      : Started MainApp in 3.684 seconds (process running for 3.977)
2025-02-15T19:46:25.624+03:00  INFO 9740 --- [http-nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-15T19:46:25.624+03:00  INFO 9740 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-02-15T19:46:25.625+03:00  INFO 9740 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-02-15T19:46:25.640+03:00 DEBUG 9740 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /login/register
2025-02-15T19:46:25.646+03:00  INFO 9740 --- [http-nio-8080-exec-2] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T19:46:25.646+03:00  INFO 9740 --- [http-nio-8080-exec-2] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login/register
2025-02-15T19:46:25.648+03:00 DEBUG 9740 --- [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T19:46:25.649+03:00 DEBUG 9740 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /login/register
2025-02-15T19:46:25.837+03:00  INFO 9740 --- [http-nio-8080-exec-2] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T19:46:27.538+03:00 DEBUG 9740 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /login
2025-02-15T19:46:27.539+03:00  INFO 9740 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T19:46:27.539+03:00  INFO 9740 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/login
2025-02-15T19:46:27.539+03:00 DEBUG 9740 --- [http-nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T19:46:27.539+03:00 DEBUG 9740 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /login
2025-02-15T19:46:27.740+03:00 DEBUG 9740 --- [http-nio-8080-exec-3] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2025-02-15T19:46:27.740+03:00  INFO 9740 --- [http-nio-8080-exec-3] com.example.config.security.JWTUtils     : Generating token for user testuser
2025-02-15T19:46:27.804+03:00  INFO 9740 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T19:46:27.804+03:00  INFO 9740 --- [http-nio-8080-exec-3] c.example.config.security.LoggingFilter  : Login successful
2025-02-15T19:46:39.052+03:00 DEBUG 9740 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /user/profile
2025-02-15T19:46:39.052+03:00  INFO 9740 --- [http-nio-8080-exec-4] c.example.config.security.LoggingFilter  : Method - GET
2025-02-15T19:46:39.052+03:00  INFO 9740 --- [http-nio-8080-exec-4] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/user/profile
2025-02-15T19:46:39.104+03:00 DEBUG 9740 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /user/profile
2025-02-15T19:46:39.106+03:00 DEBUG 9740 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.getProfile(); target is of class [com.example.controller.UserController]
2025-02-15T19:46:39.127+03:00 DEBUG 9740 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.getProfile(); target is of class [com.example.controller.UserController]
2025-02-15T19:46:39.128+03:00  INFO 9740 --- [http-nio-8080-exec-4] c.example.config.security.LoggingFilter  : Response status - 200
2025-02-15T19:46:44.884+03:00 DEBUG 9740 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /user/moderate
2025-02-15T19:46:44.885+03:00  INFO 9740 --- [http-nio-8080-exec-5] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T19:46:44.885+03:00  INFO 9740 --- [http-nio-8080-exec-5] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/user/moderate
2025-02-15T19:46:44.888+03:00 DEBUG 9740 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /user/moderate
2025-02-15T19:46:44.888+03:00 DEBUG 9740 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.moderateContent(); target is of class [com.example.controller.UserController]
2025-02-15T19:46:44.891+03:00 DEBUG 9740 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.moderateContent(); target is of class [com.example.controller.UserController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@67f08970 and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('MODERATOR') or hasRole('SUPER_ADMIN')]
2025-02-15T19:46:44.892+03:00 DEBUG 9740 --- [http-nio-8080-exec-5] o.s.s.w.access.AccessDeniedHandlerImpl   : Responding with 403 status code
2025-02-15T19:46:44.892+03:00  INFO 9740 --- [http-nio-8080-exec-5] c.example.config.security.LoggingFilter  : Response status - 403
2025-02-15T19:46:44.897+03:00 DEBUG 9740 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /error
2025-02-15T19:46:44.897+03:00 DEBUG 9740 --- [http-nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T19:46:44.898+03:00 DEBUG 9740 --- [http-nio-8080-exec-5] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-02-15T19:47:53.806+03:00 DEBUG 9740 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /user/moderate
2025-02-15T19:47:53.806+03:00  INFO 9740 --- [http-nio-8080-exec-8] c.example.config.security.LoggingFilter  : Method - POST
2025-02-15T19:47:53.806+03:00  INFO 9740 --- [http-nio-8080-exec-8] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/user/moderate
2025-02-15T19:47:53.809+03:00 DEBUG 9740 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /user/moderate
2025-02-15T19:47:53.810+03:00 DEBUG 9740 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.moderateContent(); target is of class [com.example.controller.UserController]
2025-02-15T19:47:53.810+03:00 DEBUG 9740 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.controller.UserController.moderateContent(); target is of class [com.example.controller.UserController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@67f08970 and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('MODERATOR') or hasRole('SUPER_ADMIN')]
2025-02-15T19:47:53.811+03:00 DEBUG 9740 --- [http-nio-8080-exec-8] o.s.s.w.access.AccessDeniedHandlerImpl   : Responding with 403 status code
2025-02-15T19:47:53.811+03:00  INFO 9740 --- [http-nio-8080-exec-8] c.example.config.security.LoggingFilter  : Response status - 403
2025-02-15T19:47:53.811+03:00 DEBUG 9740 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /error
2025-02-15T19:47:53.811+03:00 DEBUG 9740 --- [http-nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T19:47:53.811+03:00 DEBUG 9740 --- [http-nio-8080-exec-8] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-02-15T19:49:04.208+03:00 DEBUG 9740 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing DELETE /user/1
2025-02-15T19:49:04.209+03:00  INFO 9740 --- [http-nio-8080-exec-1] c.example.config.security.LoggingFilter  : Method - DELETE
2025-02-15T19:49:04.209+03:00  INFO 9740 --- [http-nio-8080-exec-1] c.example.config.security.LoggingFilter  : URL - http://localhost:8080/user/1
2025-02-15T19:49:04.209+03:00 DEBUG 9740 --- [http-nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T19:49:04.209+03:00 DEBUG 9740 --- [http-nio-8080-exec-1] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-02-15T19:49:04.209+03:00  INFO 9740 --- [http-nio-8080-exec-1] c.example.config.security.LoggingFilter  : Response status - 403
2025-02-15T19:49:04.210+03:00 DEBUG 9740 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing DELETE /error
2025-02-15T19:49:04.211+03:00 DEBUG 9740 --- [http-nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-02-15T19:49:04.211+03:00 DEBUG 9740 --- [http-nio-8080-exec-1] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-02-15T19:50:30.231+03:00  INFO 9740 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-15T19:50:30.233+03:00  INFO 9740 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-02-15T19:50:30.234+03:00  INFO 9740 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
